<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script charset="utf-8" src="index_files/api.ujian.cc.js"></script><script charset="utf-8" src="index_files/shares.php.js"></script><script charset="utf-8" src="index_files/id.php.js"></script>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://www.kafeitu.me/atom.xml">
    <link rel="SHORTCUT ICON" href="index_files/favicon.ico">
    <!-- weibo -->
    <meta property="wb:webmaster" content="61eb31a6e636506d">

    <!-- seo -->
    <meta name="description" content="咖啡兔 HenryYan">
    <meta name="keywords" content="html,xhtml,css,js,javascript,ajax,jQuery,java,struts,struts2,hibernate,spring,jpa,maven,ant,springside,敏捷,CI,Jenkins,Hudson,咖啡兔,HenryYan,git,github,jekyll,markdown,wiki,Activiti,BPMN2.0">
    <meta name="baidu-site-verification" content="FRWUEtd1UTgfhtF7">
    <meta name="chinaz-site-verification" content="081e7651-48c6-4c2f-a569-99321685eab1">
    <meta name="wumiiVerification" content="927cabdf-a0cc-4638-b1db-e9e398dddf1c">
    <meta name="ujianVerification" content="e8f5292dbe28276a7e530a95c5832df3">

    <title>Git Submodule使用完整教程 - 咖啡兔 - HenryYan</title>
    <link rel="stylesheet" href="index_files/master.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="index_files/syntax.css" type="text/css" media="screen" charset="utf-8">
    <link type="text/css" rel="stylesheet" href="index_files/shCoreMidnight.css">
    <link type="text/css" rel="stylesheet" href="index_files/shThemeMidnight.css">
    <script src="index_files/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="index_files/jquery.github.js" type="text/javascript" charset="utf-8"></script>
  <script src="index_files/related_items_v2.js" type="text/javascript"></script><script src="index_files/embed.js" async="" type="text/javascript"></script><link href="index_files/embed.default.css" rel="stylesheet" type="text/css"></head>
  <body><div style="left: auto; right: 0px; width: 0px; position: fixed; top: auto; bottom: 0px; z-index: 2147483644; font: 12px/15px 'Microsoft YaHei',arial,tahoma; overflow: hidden; display: none;" id="ujian-side"><table style="background:transparent;border:0px;padding:0px;margin:0px;vertical-align:middle;" cellpadding="0" cellspacing="0"><tbody style="background:transparent;"><tr><td style="background:transparent;background:transparent;border:0px;padding:0px;margin:0px;vertical-align:middle;"><div style="width:22px;height:83px;overflow:hidden;margin-right:-2px;background:url(index_files/cai.png) no-repeat -12px 0;"><span onclick="" onmouseover="" onmouseout="" style="cursor: pointer; width: 12px; height: 12px; display: block; overflow: hidden; background: url(&quot;index_files/cai.png&quot;) no-repeat scroll 0px 0px transparent; margin: 5px 0px 0px 5px;"></span></div></td><td style="background:transparent;border:0px;padding:0px;margin:0px;vertical-align:middle;"><div style="width:617px;"><div style="width:100%;height:2px;overflow:hidden;background:#666;"><span style="border-top: 2px solid rgb(102, 102, 102); width: 77px; float: left;" id="ujian_headline_0"></span><span style="border-top: 2px solid rgb(102, 102, 102); width: 77px; float: left;" id="ujian_headline_1"></span><span style="border-top: 2px solid rgb(102, 102, 102); width: 77px; float: left;" id="ujian_headline_2"></span><span style="border-top: 2px solid rgb(102, 102, 102); width: 77px; float: left;" id="ujian_headline_3"></span><span style="border-top: 2px solid rgb(102, 102, 102); width: 77px; float: left;" id="ujian_headline_4"></span><span style="border-top: 2px solid rgb(102, 102, 102); width: 77px; float: left;" id="ujian_headline_5"></span><span style="border-top:2px solid #666; width:77px; float:left;" id="ujian_headline_6"></span><span style="border-top:2px solid #666; width:77px; float:left;" id="ujian_headline_7"></span></div><div style="border-left:1px solid #e5e5e5;border-right:1px solid #e5e5e5;background:#fff;float:left; position:relative; z-index:10;"><div style="padding: 0; margin: 0; border: none; clear: both; display: block;"><div style="clear: both; border: none; margin: 0 0 0 -1px; padding: 0; overflow: hidden; _zoom: 1;"><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/shell/2012/03/25/oh-my-zsh.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: medium none; cursor: pointer; position: relative; margin: 5px 0px; padding: 5px; width: 66px; text-align: left; outline: medium none; background-image: none; border-left: 1px solid rgb(221, 221, 221) ! important; color: rgb(51, 51, 51); overflow: hidden;" onmouseover="" onmouseout="" title="我最喜爱的工具" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="index_files/mini_901402204782ffe31ed0_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">我最喜爱的工具</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/2010/04/23/resovle-jqgrid-messy-code.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: medium none; cursor: pointer; position: relative; margin: 5px 0px; padding: 5px; width: 66px; text-align: left; outline: medium none; background-image: none; border-left: 1px solid rgb(221, 221, 221) ! important; color: rgb(51, 51, 51); overflow: hidden;" onmouseover="" onmouseout="" title="jqGrid查询中文乱码问题解决办法(2011" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="index_files/35.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">jqGrid查询中文乱码问题解决办法(2011</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/2012/03/21/move-to-github.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: medium none; cursor: pointer; position: relative; margin: 5px 0px; padding: 5px; width: 66px; text-align: left; outline: medium none; background-image: none; border-left: 1px solid rgb(221, 221, 221) ! important; color: rgb(51, 51, 51); overflow: hidden;" onmouseover="" onmouseout="" title="HenryYan" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="urn:download-error:http://img.ujian.cc/201209/307/881/mini_2fb96f8fb5f535782c3f_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">HenryYan</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/linux/2012/05/19/how-do-i-work-on-linux.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: medium none; cursor: pointer; position: relative; margin: 5px 0px; padding: 5px; width: 66px; text-align: left; outline: medium none; background-image: none; border-left: 1px solid rgb(221, 221, 221) ! important; color: rgb(51, 51, 51); overflow: hidden;" onmouseover="" onmouseout="" title="我是如何在Linux(Ubuntu)上工作的？" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="urn:download-error:http://img.ujian.cc/201209/304/531/mini_05b9eb386e58f87aea58_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">我是如何在Linux(Ubuntu)上工作的？</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/activiti/2012/08/09/activiti-objects.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: medium none; cursor: pointer; position: relative; margin: 5px 0px; padding: 5px; width: 66px; text-align: left; outline: medium none; background-image: none; border-left: 1px solid rgb(221, 221, 221) ! important; color: rgb(51, 51, 51); overflow: hidden;" onmouseover="" onmouseout="" title="谈谈Activiti中流程对象之间的关系" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="index_files/mini_2be2483858842bd20479_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">谈谈Activiti中流程对象之间的关系</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/activiti/2012/05/26/kft-activiti-demo.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: medium none; cursor: pointer; position: relative; margin: 5px 0px; padding: 5px; width: 66px; text-align: left; outline: medium none; background-image: none; border-left: 1px solid rgb(221, 221, 221) ! important; color: rgb(51, 51, 51); overflow: hidden;" onmouseover="" onmouseout="" title="Activiti快速入门项目" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="index_files/mini_78a0fc2a8faf9f77ff28_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">Activiti快速入门项目</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/activiti/2012/03/22/workflow-activiti-action.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 66px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" onmouseover="" onmouseout="" title="工作流引擎Activiti使用总结" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="index_files/mini_feb76eb9c10f192dbe49_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">工作流引擎Activiti使用总结</div></a><a onmouseup="" onmousedown="" href="http://www.kafeitu.me/sso/2010/11/05/sso-cas-full-course.html" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 66px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" onmouseover="" onmouseout="" title="CAS单点登录(SSO)完整教程(2012" hidefocus="true"><div style="margin: 0;border-radius:5px; padding: 0; width: auto; height: 64px; border: 1px solid #dddddd;"></div><img class="JIATHIS_IMG_NO BSHARE_IMAGE_NO" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 60px; height: 60px; clip: rect(0px, 60px, 60px, 0px); left: 8px; top: 8px;" src="index_files/mini_a3f32c5c7af3058543bf_120_120.jpg"><div style="color:#333333;height:45px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">CAS单点登录(SSO)完整教程(2012</div></a></div><div style="height:12px; line-height:12px;"><a href="http://www.ujian.cc/index2" style="font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:11px;text-decoration:none;color:#999;float:right; padding-right:3px;" title="这是什么工具？" target="_blank">友荐[?]</a></div></div></div></div></td></tr></tbody></table></div><div style="left: auto; right: 5px; position: fixed; top: auto; bottom: 10px; z-index: 2147483643; overflow: hidden; display: block; opacity: 1;" id="ujian-backtop"><a onmouseover="" onmouseout="" href="#" title="回到顶部" onclick="" style="margin-left:3px;background:url(index_files/4.png) no-repeat scroll -64px 0 transparent;display:block;float:right;outline:0 none;text-indent:-9999em;width:32px;height:32px;">回到顶部</a><a onmouseover="" onmouseout="" href="#" title="猜你喜欢" onclick="" style="background:url(index_files/4.png) no-repeat scroll 0 0 transparent;display:block;float:right;outline:0 none;text-indent:-9999em;width:32px;height:32px;">猜你喜欢</a></div><link type="text/css" rel="stylesheet" href="index_files/jiathis_counter.css"><link type="text/css" rel="stylesheet" href="index_files/jiathis_share.css"><iframe src="index_files/generated-content.html" style="position: fixed; display: none; opacity: 0;" frameborder="0"></iframe><div style="position: absolute; z-index: 1000000000; display: none; top: 50%; left: 50%; overflow: auto;" class="jiathis_style"></div><div style="position: absolute; z-index: 1000000000; display: none; overflow: auto;" class="jiathis_style"></div><iframe src="index_files/jiathis_utility.html" style="display: none;" frameborder="0"></iframe>
  <a href="http://github.com/henryyan/henryyan.github.com"><img style="position: absolute; top: 0; right: 0; border: 0;" src="index_files/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>
    <div id="wrapper">
      <div id="header">
        <h1><a href="http://www.kafeitu.me/">咖啡兔</a></h1>
        
        <div id="menu">
          <ul>
            <li><a href="http://www.kafeitu.me/" id="home-link" title="Home">首页</a></li>
            <li><a href="http://www.kafeitu.me/blog.html" id="blog-link" title="Blog">博客</a></li>
            <li><a href="http://www.kafeitu.me/activiti.html" id="activiti-link" title="基于BPMN2.0规范的轻量级工作流引擎-Activiti">Activiti</a></li>
            <li><a href="http://www.kafeitu.me/activiti-in-action.html" id="activiti-link" title="国内专题书籍《Activiti实战》">Activiti实战</a></li>
            <li><a href="http://www.kafeitu.me/categories.html" id="categories-link" title="Categories">分类</a></li>
            <li><a href="http://www.kafeitu.me/tags.html" id="tags-link" title="Tags">标签</a></li>
            <li><a href="http://www.kafeitu.me/about.html" id="about-link" title="About">关于我</a></li>
            <li><a href="http://github.com/henryyan" target="_blank" title="GitHub" rel="me" id="github-link">GitHub</a></li>
            <li><a href="http://weibo.com/kafeituzi" title="微博（我才是咖啡兔）" target="_blank" id="weibo-link">微博（我才是咖啡兔）</a></li>
            <li><a href="http://www.activiticn.org/" title="Activiti论坛" target="_blank" id="forum-link">Activiti论坛</a></li>
          </ul>
        </div>
        <div id="action" style="color:#737576;font-size:14px;position:absolute;margin-top:107px !important;margin-left: 425px !important;">《实战》</div>
      </div>
      <div id="content">
        <div class="post">
  <span class="date">27 Mar 2012</span>
  <a href="#comments" title="分享文章、查看评论" style="float:right">Comments</a>
  <h1><a href="#">Git Submodule使用完整教程</a></h1>
  <div class="body"><p>自从看了蒋鑫的《<a href="http://book.douban.com/subject/6526452/">Git权威指南</a>》之后就开始使用Git Submodule功能，团队也都熟悉了怎么使用，多个子系统（模块）都能及时更新到最新的公共资源，把使用的过程以及经验和容易遇到的问题分享给大家。</p>

<pre>Git Submodule功能刚刚开始学习可能觉得有点怪异，所以本教程把每一步的操作的命令和结果都用代码的形式展现给大家，以便更好的理解。
</pre>


<h2>1.对于公共资源各种程序员的处理方式</h2>

<p>每个公司的系统都会有一套统一的系统风格，或者针对某一个大客户的多个系统风格保持统一，而且如果风格改动后要同步到多个系统中；这样的需求几乎每个开发人员都遇到，下面看看各个层次的程序员怎么处理：</p>

<p>假如对于系统的风格需要几个目录：css、images、js。</p>

<ul>
<li><p><strong>普通</strong>程序员，把最新版本的代码逐个复制到每个项目中，如果有N个项目，那就是要复制<strong>N x 3</strong>次；如果漏掉了某个文件夹没有复制…@（&amp;#@#。</p></li>
<li><p><strong>文艺</strong>程序员，使用Git Submodule功能，执行：<strong>git submodule update</strong>，然后冲一杯咖啡悠哉的享受着。</p></li>
</ul>


<hr>

<p>引用一段《<a href="http://book.douban.com/subject/6526452/">Git权威指南</a>》的话：
项目的版本库在某些情况虾需要引用其他版本库中的文件，例如公司积累了一套常用的函数库，被多个项目调用，显然这个函数库的代码不能直接放到某个项目的代码中，而是要独立为一个代码库，那么其他项目要调用公共函数库该如何处理呢？分别把公共函数库的文件拷贝到各自的项目中会造成冗余，丢弃了公共函数库的维护历史，这显然不是好的方法。</p>

<h2>2.开始学习Git Submodule</h2>

<p>“工欲善其事，必先利其器”！</p>

<p>既然文艺程序员那么轻松就搞定了，那我们就把过程一一道来。</p>

<p><strong>说明</strong>：本例采用<strong>两个项目</strong>以及<strong>两个公共类库</strong>演示对submodule的操作。因为在一写资料或者书上的例子都是一个项目对应1～N个lib，但是实际应用往往并不是这么简单。</p>

<h3>2.1 创建Git Submodule测试项目</h3>

<h4>2.1.1 准备环境</h4>

<div><div id="highlighter_971614" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~  </code><code class="shell functions">pwd</code></div><div class="line number2 index1 alt1"><code class="shell plain">/home/henryyan</code></div><div class="line number3 index2 alt2"><code class="shell functions">mkdir</code> <code class="shell plain">-p submd</code><code class="shell plain">/repos</code></div></div></td></tr></tbody></table></div></div>


<p>创建需要的本地仓库：</p>

<div><div id="highlighter_230578" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell functions">cd</code> <code class="shell plain">~</code><code class="shell plain">/submd/repos</code></div><div class="line number2 index1 alt1"><code class="shell plain">git --git-</code><code class="shell functions">dir</code><code class="shell plain">=lib1.git init --bare</code></div><div class="line number3 index2 alt2"><code class="shell plain">git --git-</code><code class="shell functions">dir</code><code class="shell plain">=lib2.git init --bare</code></div><div class="line number4 index3 alt1"><code class="shell plain">git --git-</code><code class="shell functions">dir</code><code class="shell plain">=project1.git init --bare</code></div><div class="line number5 index4 alt2"><code class="shell plain">git --git-</code><code class="shell functions">dir</code><code class="shell plain">=project2.git init --bare</code></div></div></td></tr></tbody></table></div></div>


<p>初始化工作区：</p>

<div><div id="highlighter_89873" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell functions">mkdir</code> <code class="shell plain">~</code><code class="shell plain">/submd/ws</code></div><div class="line number2 index1 alt1"><code class="shell functions">cd</code> <code class="shell plain">~</code><code class="shell plain">/submd/ws</code></div></div></td></tr></tbody></table></div></div>


<h4>2.1.2 初始化项目</h4>

<p>初始化project1：</p>

<div><div id="highlighter_50347" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone ..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git </code></div><div class="line number2 index1 alt1"><code class="shell plain">Cloning into project1...</code></div><div class="line number3 index2 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">warning: You appear to have cloned an empty repository.</code></div><div class="line number5 index4 alt2"> </div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">project1</code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"project1"</code> <code class="shell plain">&gt; project-infos.txt</code></div><div class="line number8 index7 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">ls</code></div><div class="line number9 index8 alt2"><code class="shell plain">project-infos.txt</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git add project-infos.txt </code></div><div class="line number12 index11 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number13 index12 alt2"><code class="shell comments"># On branch master</code></div><div class="line number14 index13 alt1"><code class="shell comments">#</code></div><div class="line number15 index14 alt2"><code class="shell comments"># Initial commit</code></div><div class="line number16 index15 alt1"><code class="shell comments">#</code></div><div class="line number17 index16 alt2"><code class="shell comments"># Changes to be committed:</code></div><div class="line number18 index17 alt1"><code class="shell comments">#   (use "git rm --cached &lt;file&gt;..." to unstage)</code></div><div class="line number19 index18 alt2"><code class="shell comments">#</code></div><div class="line number20 index19 alt1"><code class="shell comments">#   new file:   project-infos.txt</code></div><div class="line number21 index20 alt2"><code class="shell comments">#</code></div><div class="line number22 index21 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"init project1"</code></div><div class="line number23 index22 alt2"><code class="shell plain">[master (root-commit) 473a2e2] init project1</code></div><div class="line number24 index23 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number25 index24 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 project-infos.txt</code></div><div class="line number26 index25 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git push origin master</code></div><div class="line number27 index26 alt2"><code class="shell plain">Counting objects: 3, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number28 index27 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 232 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number29 index28 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number30 index29 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number31 index30 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number32 index31 alt1"><code class="shell spaces"> </code><code class="shell plain">* [new branch]      master -&gt; master</code></div><div class="line number33 index32 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>初始化project2：</p>

<div><div id="highlighter_323403" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell functions">cd</code> <code class="shell plain">..</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone ..</code><code class="shell plain">/repos/project2</code><code class="shell plain">.git </code></div><div class="line number3 index2 alt2"><code class="shell plain">Cloning into project2...</code></div><div class="line number4 index3 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">warning: You appear to have cloned an empty repository.</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">project2</code></div><div class="line number8 index7 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"project2"</code> <code class="shell plain">&gt; project-infos.txt</code></div><div class="line number9 index8 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">ls</code></div><div class="line number10 index9 alt1"><code class="shell plain">project-infos.txt</code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git add project-infos.txt </code></div><div class="line number13 index12 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number14 index13 alt1"><code class="shell comments"># On branch master</code></div><div class="line number15 index14 alt2"><code class="shell comments">#</code></div><div class="line number16 index15 alt1"><code class="shell comments"># Initial commit</code></div><div class="line number17 index16 alt2"><code class="shell comments">#</code></div><div class="line number18 index17 alt1"><code class="shell comments"># Changes to be committed:</code></div><div class="line number19 index18 alt2"><code class="shell comments">#   (use "git rm --cached &lt;file&gt;..." to unstage)</code></div><div class="line number20 index19 alt1"><code class="shell comments">#</code></div><div class="line number21 index20 alt2"><code class="shell comments">#   new file:   project-infos.txt</code></div><div class="line number22 index21 alt1"><code class="shell comments">#</code></div><div class="line number23 index22 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"init project2"</code></div><div class="line number24 index23 alt1"><code class="shell plain">[master (root-commit) 473a2e2] init project2</code></div><div class="line number25 index24 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number26 index25 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 project-infos.txt</code></div><div class="line number27 index26 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) git push origin master</code></div><div class="line number28 index27 alt1"><code class="shell plain">Counting objects: 3, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number29 index28 alt2"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 232 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number30 index29 alt1"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number31 index30 alt2"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number32 index31 alt1"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project2</code><code class="shell plain">.git</code></div><div class="line number33 index32 alt2"><code class="shell spaces"> </code><code class="shell plain">* [new branch]      master -&gt; master</code></div><div class="line number34 index33 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<h4>2.1.3 初始化公共类库</h4>

<p>初始化公共类库lib1：</p>

<div><div id="highlighter_986107" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone ..</code><code class="shell plain">/repos/lib1</code><code class="shell plain">.git </code></div><div class="line number2 index1 alt1"><code class="shell plain">Cloning into lib1...</code></div><div class="line number3 index2 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">warning: You appear to have cloned an empty repository.</code></div><div class="line number5 index4 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">lib1 </code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib1</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"I'm lib1."</code> <code class="shell plain">&gt; lib1-features</code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib1</code> <code class="shell plain">git:(master) ✗ git add lib1-features </code></div><div class="line number8 index7 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib1</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"init lib1"</code></div><div class="line number9 index8 alt2"><code class="shell plain">[master (root-commit) c22aff8] init lib1</code></div><div class="line number10 index9 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number11 index10 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 lib1-features</code></div><div class="line number12 index11 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib1</code> <code class="shell plain">git:(master) git push origin master</code></div><div class="line number13 index12 alt2"><code class="shell plain">Counting objects: 3, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number14 index13 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 227 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number15 index14 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number16 index15 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number17 index16 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/lib1</code><code class="shell plain">.git</code></div><div class="line number18 index17 alt1"><code class="shell spaces"> </code><code class="shell plain">* [new branch]      master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<p>初始化公共类库lib2：</p>

<div><div id="highlighter_755251" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">..</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone ..</code><code class="shell plain">/repos/lib2</code><code class="shell plain">.git </code></div><div class="line number3 index2 alt2"><code class="shell plain">Cloning into lib2...</code></div><div class="line number4 index3 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">warning: You appear to have cloned an empty repository.</code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">lib2 </code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib2</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"I'm lib2."</code> <code class="shell plain">&gt; lib2-features</code></div><div class="line number8 index7 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib2</code> <code class="shell plain">git:(master) ✗ git add lib2-features </code></div><div class="line number9 index8 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib2</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"init lib2"</code></div><div class="line number10 index9 alt1"><code class="shell plain">[master (root-commit) c22aff8] init lib2</code></div><div class="line number11 index10 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number12 index11 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 lib2-features</code></div><div class="line number13 index12 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib2</code> <code class="shell plain">git:(master) git push origin master</code></div><div class="line number14 index13 alt1"><code class="shell plain">Counting objects: 3, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number15 index14 alt2"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 227 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number16 index15 alt1"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number17 index16 alt2"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number18 index17 alt1"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/lib2</code><code class="shell plain">.git</code></div><div class="line number19 index18 alt2"><code class="shell spaces"> </code><code class="shell plain">* [new branch]      master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<h3>2.2 为主项目添加Submodules</h3>

<h4>2.2.1 为project1添加lib1和lib2</h4>

<div><div id="highlighter_807558" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/lib2</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">..</code><code class="shell plain">/project1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">ls</code></div><div class="line number3 index2 alt2"><code class="shell plain">project-infos.txt</code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git submodule add ~</code><code class="shell plain">/submd/repos/lib1</code><code class="shell plain">.git libs</code><code class="shell plain">/lib1</code></div><div class="line number5 index4 alt2"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib1</code><code class="shell plain">...</code></div><div class="line number6 index5 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git submodule add ~</code><code class="shell plain">/submd/repos/lib2</code><code class="shell plain">.git libs</code><code class="shell plain">/lib2</code></div><div class="line number8 index7 alt1"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib2</code><code class="shell plain">...</code></div><div class="line number9 index8 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number10 index9 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">ls</code></div><div class="line number11 index10 alt2"><code class="shell plain">libs  project-infos.txt</code></div><div class="line number12 index11 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">ls</code> <code class="shell plain">libs </code></div><div class="line number13 index12 alt2"><code class="shell plain">lib1  lib2</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git status </code></div><div class="line number16 index15 alt1"><code class="shell comments"># On branch master</code></div><div class="line number17 index16 alt2"><code class="shell comments"># Changes to be committed:</code></div><div class="line number18 index17 alt1"><code class="shell comments">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</code></div><div class="line number19 index18 alt2"><code class="shell comments">#</code></div><div class="line number20 index19 alt1"><code class="shell comments">#   new file:   .gitmodules</code></div><div class="line number21 index20 alt2"><code class="shell comments">#   new file:   libs/lib1</code></div><div class="line number22 index21 alt1"><code class="shell comments">#   new file:   libs/lib2</code></div><div class="line number23 index22 alt2"><code class="shell comments">#</code></div><div class="line number24 index23 alt1"> </div><div class="line number25 index24 alt2"><code class="shell comments"># 查看一下公共类库的内容</code></div><div class="line number26 index25 alt1"> </div><div class="line number27 index26 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cat</code> <code class="shell plain">libs</code><code class="shell plain">/lib1/lib1-features</code></div><div class="line number28 index27 alt1"><code class="shell plain">I'm lib1.</code></div><div class="line number29 index28 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cat</code> <code class="shell plain">libs</code><code class="shell plain">/lib2/lib2-features</code></div><div class="line number30 index29 alt1"><code class="shell plain">I'm lib2.</code></div><div class="line number31 index30 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>好了，到目前为止我们已经使用<strong>git submodule add</strong>命令为<strong>project1</strong>成功添加了两个公共类库（lib1、lib2），查看了当前的状态发现添加了一个新文件(<strong>.gitmodules</strong>)和两个文件夹(libs/lib1、libs/lib2)；那么新增的<strong>.gitmodules</strong>文件是做什么用的呢？我们查看一下文件内容便知晓了：</p>

<div><div id="highlighter_755474" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">n@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">cat</code> <code class="shell plain">.gitmodules </code></div><div class="line number2 index1 alt1"><code class="shell plain">[submodule </code><code class="shell string">"libs/lib1"</code><code class="shell plain">]</code></div><div class="line number3 index2 alt2"><code class="shell spaces">    </code><code class="shell plain">path = libs</code><code class="shell plain">/lib1</code></div><div class="line number4 index3 alt1"><code class="shell spaces">    </code><code class="shell plain">url = </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git</code></div><div class="line number5 index4 alt2"><code class="shell plain">[submodule </code><code class="shell string">"libs/lib2"</code><code class="shell plain">]</code></div><div class="line number6 index5 alt1"><code class="shell spaces">    </code><code class="shell plain">path = libs</code><code class="shell plain">/lib2</code></div><div class="line number7 index6 alt2"><code class="shell spaces">    </code><code class="shell plain">url = </code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git</code></div></div></td></tr></tbody></table></div></div>


<p>原来如此，<strong>.gitmodules</strong>记录了每个submodule的引用信息，知道在当前项目的位置以及仓库的所在。</p>

<p>好的，我们现在把更改提交到仓库。</p>

<div><div id="highlighter_598132" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git commit -a -m </code><code class="shell string">"add submodules[lib1,lib2] to project1"</code></div><div class="line number2 index1 alt1"><code class="shell plain">[master 7157977] add submodules[lib1,lib2] to project1</code></div><div class="line number3 index2 alt2"><code class="shell spaces"> </code><code class="shell plain">3 files changed, 8 insertions(+), 0 deletions(-)</code></div><div class="line number4 index3 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 .gitmodules</code></div><div class="line number5 index4 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 160000 libs</code><code class="shell plain">/lib1</code></div><div class="line number6 index5 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 160000 libs</code><code class="shell plain">/lib2</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git push</code></div><div class="line number9 index8 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number10 index9 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Compressing objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number12 index11 alt1"><code class="shell plain">Writing objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), 491 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number13 index12 alt2"><code class="shell plain">Total 4 (delta 0), reused 0 (delta 0)</code></div><div class="line number14 index13 alt1"><code class="shell plain">Unpacking objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number15 index14 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number16 index15 alt1"><code class="shell spaces">   </code><code class="shell plain">45cbbcb..7157977  master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<pre><code>假如你是第一次引入公共类库的开发人员，那么项目组的其他成员怎么Clone带有Submodule的项目呢，下面我们再clone一个项目讲解如何操作。
</code></pre>

<h3>2.3 Clone带有Submodule的仓库</h3>

<p>模拟开发人员B……</p>

<div><div id="highlighter_887528" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">~</code><code class="shell plain">/submd/ws</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone ..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git project1-b</code></div><div class="line number3 index2 alt2"><code class="shell plain">Cloning into project1-b...</code></div><div class="line number4 index3 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">project1-b </code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) git submodule </code></div><div class="line number7 index6 alt2"><code class="shell plain">-c22aff85be91eca442734dcb07115ffe526b13a1 libs</code><code class="shell plain">/lib1</code></div><div class="line number8 index7 alt1"><code class="shell plain">-7290dce0062bd77df1d83b27dd3fa3f25a836b54 libs</code><code class="shell plain">/lib2</code></div></div></td></tr></tbody></table></div></div>


<p>看到submodules的状态是hash码和文件目录，但是注意前面有一个减号：<strong>-</strong>，含义是该子模块还没有检出。</p>

<p>OK，检出project1-b的submodules……</p>

<div><div id="highlighter_902327" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) git submodule init</code></div><div class="line number2 index1 alt1"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib1'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib1'</code></div><div class="line number3 index2 alt2"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib2'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib2'</code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) git submodule update</code></div><div class="line number5 index4 alt2"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib1</code><code class="shell plain">...</code></div><div class="line number6 index5 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number7 index6 alt2"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib1'</code><code class="shell plain">: checked out </code><code class="shell string">'c22aff85be91eca442734dcb07115ffe526b13a1'</code></div><div class="line number8 index7 alt1"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib2</code><code class="shell plain">...</code></div><div class="line number9 index8 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number10 index9 alt1"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib2'</code><code class="shell plain">: checked out </code><code class="shell string">'7290dce0062bd77df1d83b27dd3fa3f25a836b54'</code></div></div></td></tr></tbody></table></div></div>


<pre><code>读者可以查看：.git/config文件的内容，最下面有submodule的注册信息！
</code></pre>

<p>验证一下类库的文件是否存在：</p>

<div><div id="highlighter_161633" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) </code><code class="shell functions">cat</code> <code class="shell plain">libs</code><code class="shell plain">/lib1/lib1-features</code> <code class="shell plain">libs</code><code class="shell plain">/lib2/lib2-features</code></div><div class="line number2 index1 alt1"><code class="shell plain">I'm lib1.</code></div><div class="line number3 index2 alt2"><code class="shell plain">I'm lib2.</code></div></div></td></tr></tbody></table></div></div>


<pre><code>上面的两个命令(git submodule init &amp; update)其实可以简化，后面会讲到！
</code></pre>

<h3>2.3 修改Submodule</h3>

<p>我们在开发人员B的项目上修改Submodule的内容。</p>

<p>先看一下当前Submodule的状态：</p>

<div><div id="highlighter_900676" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">libs</code><code class="shell plain">/lib1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code>  <code class="shell plain">git status</code></div><div class="line number3 index2 alt2"><code class="shell comments"># Not currently on any branch.</code></div><div class="line number4 index3 alt1"><code class="shell plain">nothing to commit (working directory clean)</code></div></div></td></tr></tbody></table></div></div>


<p>为什么是<strong>Not currently on any branch</strong>呢？不是应该默认在<strong>master</strong>分支吗？别急，一一解答！</p>

<p>Git对于Submodule有特殊的处理方式，在一个主项目中引入了Submodule其实Git做了3件事情：</p>

<ul>
<li><p>记录引用的仓库</p></li>
<li><p>记录主项目中Submodules的目录位置</p></li>
<li><p>记录引用Submodule的<strong>commit id</strong></p></li>
</ul>


<p>在<strong>project1</strong>中push之后其实就是更新了引用的commit id，然后project1-b在clone的时候获取到了submodule的commit id，然后当执行<strong>git submodule update</strong>的时候git就根据<strong>gitlink</strong>获取submodule的commit id，最后获取submodule的文件，所以clone之后不在任何分支上；但是master分支的commit id和HEAD保持一致。</p>

<p>查看~/submd/ws/project1-b/libs/lib1的引用信息：</p>

<div><div id="highlighter_26922" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code>  <code class="shell functions">cat</code> <code class="shell plain">.git</code><code class="shell plain">/HEAD</code></div><div class="line number2 index1 alt1"><code class="shell plain">c22aff85be91eca442734dcb07115ffe526b13a1</code></div><div class="line number3 index2 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code>  <code class="shell functions">cat</code> <code class="shell plain">.git</code><code class="shell plain">/refs/heads/master</code>              </div><div class="line number4 index3 alt1"><code class="shell plain">c22aff85be91eca442734dcb07115ffe526b13a1</code></div></div></td></tr></tbody></table></div></div>


<p>现在我们要修改lib1的文件需要先切换到<strong>master</strong>分支：</p>

<div><div id="highlighter_285212" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code>  <code class="shell plain">git checkout master</code></div><div class="line number2 index1 alt1"><code class="shell plain">Switched to branch </code><code class="shell string">'master'</code></div><div class="line number3 index2 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"add by developer B"</code> <code class="shell plain">&gt;&gt; lib1-features</code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code> <code class="shell plain">git:(master) ✗ git commit -a -m </code><code class="shell string">"update lib1-features by developer B"</code></div><div class="line number5 index4 alt2"><code class="shell plain">[master 36ad12d] update lib1-features by developer B</code></div><div class="line number6 index5 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div></div></td></tr></tbody></table></div></div>


<p>在主项目中修改Submodule提交到仓库稍微繁琐一点，在<strong>git push</strong>之前我们先看看<strong>project1-b</strong>状态：</p>

<div><div id="highlighter_762584" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number2 index1 alt1"><code class="shell comments"># On branch master</code></div><div class="line number3 index2 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number4 index3 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number5 index4 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number6 index5 alt1"><code class="shell comments">#</code></div><div class="line number7 index6 alt2"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number8 index7 alt1"><code class="shell comments">#</code></div><div class="line number9 index8 alt2"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number10 index9 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p><strong>libs/lib1 (new commits)</strong>状态表示<strong>libs/lib1</strong>有新的提交，这个比较特殊，看看<strong>project1-b</strong>的状态：</p>

<div><div id="highlighter_810037" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git </code><code class="shell functions">diff</code></div><div class="line number2 index1 alt1"><code class="shell functions">diff</code> <code class="shell plain">--git a</code><code class="shell plain">/libs/lib1</code> <code class="shell plain">b</code><code class="shell plain">/libs/lib1</code></div><div class="line number3 index2 alt2"><code class="shell plain">index c22aff8..36ad12d 160000</code></div><div class="line number4 index3 alt1"><code class="shell plain">--- a</code><code class="shell plain">/libs/lib1</code></div><div class="line number5 index4 alt2"><code class="shell plain">+++ b</code><code class="shell plain">/libs/lib1</code></div><div class="line number6 index5 alt1"><code class="shell plain">@@ -1 +1 @@</code></div><div class="line number7 index6 alt2"><code class="shell plain">-Subproject commit c22aff85be91eca442734dcb07115ffe526b13a1</code></div><div class="line number8 index7 alt1"><code class="shell plain">+Subproject commit 36ad12d40d8a41a4a88a64add27bd57cf56c9de2</code></div></div></td></tr></tbody></table></div></div>


<p>从状态中可以看出<strong>libs/lib1</strong>的commit id由原来的<strong>c22aff85be91eca442734dcb07115ffe526b13a1</strong>更改为<strong>36ad12d40d8a41a4a88a64add27bd57cf56c9de2</strong></p>

<pre>注意：如果现在执行了git submodule update操作那么libs/lib1的commit id又会还原到c22aff85be91eca442734dcb07115ffe526b13a1，

这样的话刚刚的修改是不是就丢死了呢？不会，因为修改已经提交到了master分支，只要再git checkout master就可以了。
</pre>


<p>现在可以把<strong>libs/lib1</strong>的修改提交到仓库了：</p>

<div><div id="highlighter_122965" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">cd</code> <code class="shell plain">libs</code><code class="shell plain">/lib1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code> <code class="shell plain">git:(master) git push</code></div><div class="line number3 index2 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 300 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number6 index5 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number7 index6 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git</code></div><div class="line number8 index7 alt1"><code class="shell spaces">   </code><code class="shell plain">c22aff8..36ad12d  master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<p>现在仅仅只完成了一步，下一步要提交<strong>project1-b</strong>引用submodule的commit id：</p>

<div><div id="highlighter_464331" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b/libs/lib1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">~</code><code class="shell plain">/submd/ws/project1-b</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git add -u</code></div><div class="line number3 index2 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"update libs/lib1 to lastest commit id"</code></div><div class="line number4 index3 alt1"><code class="shell plain">[master c96838a] update libs</code><code class="shell plain">/lib1</code> <code class="shell plain">to lastest commit </code><code class="shell functions">id</code></div><div class="line number5 index4 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 1 deletions(-)</code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) git push</code></div><div class="line number7 index6 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number8 index7 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number9 index8 alt2"><code class="shell plain">Compressing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number10 index9 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 395 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number12 index11 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number13 index12 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number14 index13 alt1"><code class="shell spaces">   </code><code class="shell plain">7157977..c96838a  master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<p>OK，大功高成，我们完成了Submodule的修改并把<strong>libs/lib1</strong>的最新commit id提交到了仓库。</p>

<p>接下来要看看<strong>project1</strong>怎么获取submodule了。</p>

<h3>2.4 更新主项目的Submodules</h3>

<p>好的，让我们先进入<strong>project1</strong>目录同步仓库：</p>

<div><div id="highlighter_393292" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">..</code><code class="shell plain">/project1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git pull</code></div><div class="line number3 index2 alt2"><code class="shell plain">remote: Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">remote: Compressing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number6 index5 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number7 index6 alt2"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code></div><div class="line number8 index7 alt1"><code class="shell spaces">   </code><code class="shell plain">7157977..c96838a  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number9 index8 alt2"><code class="shell plain">Updating 7157977..c96838a</code></div><div class="line number10 index9 alt1"><code class="shell plain">Fast-forward</code></div><div class="line number11 index10 alt2"><code class="shell spaces"> </code><code class="shell plain">libs</code><code class="shell plain">/lib1</code> <code class="shell plain">|    2 +-</code></div><div class="line number12 index11 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 1 deletions(-)</code></div><div class="line number13 index12 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number14 index13 alt1"><code class="shell comments"># On branch master</code></div><div class="line number15 index14 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number16 index15 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number17 index16 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number18 index17 alt1"><code class="shell comments">#</code></div><div class="line number19 index18 alt2"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number20 index19 alt1"><code class="shell comments">#</code></div><div class="line number21 index20 alt2"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number22 index21 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>我们运行了<strong>git pull</strong>命令和<strong>git status</strong>获取了最新的仓库源码，然后看到了状态时<strong>modified</strong>，这是为什么呢？</p>

<p>我们用<strong>git diff</strong>比较一下不同：</p>

<div><div id="highlighter_328559" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git </code><code class="shell functions">diff</code></div><div class="line number2 index1 alt1"><code class="shell functions">diff</code> <code class="shell plain">--git a</code><code class="shell plain">/libs/lib1</code> <code class="shell plain">b</code><code class="shell plain">/libs/lib1</code></div><div class="line number3 index2 alt2"><code class="shell plain">index 36ad12d..c22aff8 160000</code></div><div class="line number4 index3 alt1"><code class="shell plain">--- a</code><code class="shell plain">/libs/lib1</code></div><div class="line number5 index4 alt2"><code class="shell plain">+++ b</code><code class="shell plain">/libs/lib1</code></div><div class="line number6 index5 alt1"><code class="shell plain">@@ -1 +1 @@</code></div><div class="line number7 index6 alt2"><code class="shell plain">-Subproject commit 36ad12d40d8a41a4a88a64add27bd57cf56c9de2</code></div><div class="line number8 index7 alt1"><code class="shell plain">+Subproject commit c22aff85be91eca442734dcb07115ffe526b13a1</code></div></div></td></tr></tbody></table></div></div>


<p>从diff的结果分析出来时因为submodule的commit id更改了，我们前面刚刚讲了要在主项目更新submodule的内容首先要提交submdoule的内容，然后再更新主项目中引用的submodulecommit id；现在我们看到的不同就是因为刚刚更改了project1-b的submodule commit id；好的，我来学习一下怎么更新<strong>project1</strong>的公共类库。</p>

<p>follow me……</p>

<div><div id="highlighter_242744" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git submodule update</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number3 index2 alt2"><code class="shell comments"># On branch master</code></div><div class="line number4 index3 alt1"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number5 index4 alt2"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number6 index5 alt1"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number7 index6 alt2"><code class="shell comments">#</code></div><div class="line number8 index7 alt1"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number9 index8 alt2"><code class="shell comments">#</code></div><div class="line number10 index9 alt1"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number11 index10 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>泥马，为什么没有更新？<strong>git submodule update</strong>命令不是更新子模块仓库的吗？</p>

<p>别急，先听我解释；因为子模块是在<strong>project1</strong>中引入的，<strong>git submodule add ~/submd/repos/lib1.git libs/lib1</strong>命令的结果，操作之后git只是把lib1的内容clone到了<strong>project1</strong>中，但是没有在仓库注册，证据如下：</p>

<div><div id="highlighter_164057" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd2/ws/project1</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">cat</code> <code class="shell plain">.git</code><code class="shell plain">/config</code></div><div class="line number2 index1 alt1"><code class="shell plain">[core]</code></div><div class="line number3 index2 alt2"><code class="shell spaces">    </code><code class="shell plain">repositoryformatversion = 0</code></div><div class="line number4 index3 alt1"><code class="shell spaces">    </code><code class="shell plain">filemode = </code><code class="shell functions">true</code></div><div class="line number5 index4 alt2"><code class="shell spaces">    </code><code class="shell plain">bare = </code><code class="shell functions">false</code></div><div class="line number6 index5 alt1"><code class="shell spaces">    </code><code class="shell plain">logallrefupdates = </code><code class="shell functions">true</code></div><div class="line number7 index6 alt2"><code class="shell plain">[remote </code><code class="shell string">"origin"</code><code class="shell plain">]</code></div><div class="line number8 index7 alt1"><code class="shell spaces">    </code><code class="shell plain">fetch = +refs</code><code class="shell plain">/heads/</code><code class="shell plain">*:refs</code><code class="shell plain">/remotes/origin/</code><code class="shell plain">*</code></div><div class="line number9 index8 alt2"><code class="shell spaces">    </code><code class="shell plain">url = </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number10 index9 alt1"><code class="shell plain">[branch </code><code class="shell string">"master"</code><code class="shell plain">]</code></div><div class="line number11 index10 alt2"><code class="shell spaces">    </code><code class="shell plain">remote = origin</code></div><div class="line number12 index11 alt1"><code class="shell spaces">    </code><code class="shell plain">merge = refs</code><code class="shell plain">/heads/master</code></div></div></td></tr></tbody></table></div></div>


<p>我们说过<strong>git submodule init</strong>就是在<strong>.git/config</strong>中注册子模块的信息，下面我们试试注册之后再更新子模块：</p>

<div><div id="highlighter_631750" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git submodule init</code></div><div class="line number2 index1 alt1"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib1'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib1'</code></div><div class="line number3 index2 alt2"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib2'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib2'</code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git submodule update</code></div><div class="line number5 index4 alt2"><code class="shell plain">remote: Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number6 index5 alt1"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number7 index6 alt2"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number8 index7 alt1"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code></div><div class="line number9 index8 alt2"><code class="shell spaces">   </code><code class="shell plain">c22aff8..36ad12d  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number10 index9 alt1"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib1'</code><code class="shell plain">: checked out </code><code class="shell string">'36ad12d40d8a41a4a88a64add27bd57cf56c9de2'</code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cat</code> <code class="shell plain">.git</code><code class="shell plain">/config</code></div><div class="line number13 index12 alt2"><code class="shell plain">[core]</code></div><div class="line number14 index13 alt1"><code class="shell spaces">    </code><code class="shell plain">repositoryformatversion = 0</code></div><div class="line number15 index14 alt2"><code class="shell spaces">    </code><code class="shell plain">filemode = </code><code class="shell functions">true</code></div><div class="line number16 index15 alt1"><code class="shell spaces">    </code><code class="shell plain">bare = </code><code class="shell functions">false</code></div><div class="line number17 index16 alt2"><code class="shell spaces">    </code><code class="shell plain">logallrefupdates = </code><code class="shell functions">true</code></div><div class="line number18 index17 alt1"><code class="shell plain">[remote </code><code class="shell string">"origin"</code><code class="shell plain">]</code></div><div class="line number19 index18 alt2"><code class="shell spaces">    </code><code class="shell plain">fetch = +refs</code><code class="shell plain">/heads/</code><code class="shell plain">*:refs</code><code class="shell plain">/remotes/origin/</code><code class="shell plain">*</code></div><div class="line number20 index19 alt1"><code class="shell spaces">    </code><code class="shell plain">url = </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number21 index20 alt2"><code class="shell plain">[branch </code><code class="shell string">"master"</code><code class="shell plain">]</code></div><div class="line number22 index21 alt1"><code class="shell spaces">    </code><code class="shell plain">remote = origin</code></div><div class="line number23 index22 alt2"><code class="shell spaces">    </code><code class="shell plain">merge = refs</code><code class="shell plain">/heads/master</code></div><div class="line number24 index23 alt1"><code class="shell plain">[submodule </code><code class="shell string">"libs/lib1"</code><code class="shell plain">]</code></div><div class="line number25 index24 alt2"><code class="shell spaces">    </code><code class="shell plain">url = </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git</code></div><div class="line number26 index25 alt1"><code class="shell plain">[submodule </code><code class="shell string">"libs/lib2"</code><code class="shell plain">]</code></div><div class="line number27 index26 alt2"><code class="shell spaces">    </code><code class="shell plain">url = </code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git</code></div><div class="line number28 index27 alt1"> </div><div class="line number29 index28 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cat</code> <code class="shell plain">libs</code><code class="shell plain">/lib1/lib1-features</code></div><div class="line number30 index29 alt1"><code class="shell plain">I'm lib1.</code></div><div class="line number31 index30 alt2"><code class="shell plain">add by developer B</code></div></div></td></tr></tbody></table></div></div>


<p>上面的结果足以证明刚刚的推断，所以记得当需要更新子模块的内容时请先确保已经运行过<strong>git submodule init</strong>。</p>

<h3>2.5 为project2添加lib1和lib2</h3>

<p>这个操作对于读到这里的你来说应该是<strong>轻车熟路</strong>了，action：</p>

<div><div id="highlighter_902648" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">~</code><code class="shell plain">/submd/ws/project2</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) git submodule add ~</code><code class="shell plain">/submd/repos/lib1</code><code class="shell plain">.git libs</code><code class="shell plain">/lib1</code></div><div class="line number3 index2 alt2"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib1</code><code class="shell plain">...</code></div><div class="line number4 index3 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git submodule add ~</code><code class="shell plain">/submd/repos/lib2</code><code class="shell plain">.git libs</code><code class="shell plain">/lib2</code></div><div class="line number6 index5 alt1"><code class="shell plain">zsh: correct </code><code class="shell string">'libs/lib2'</code> <code class="shell plain">to </code><code class="shell string">'libs/lib1'</code> <code class="shell plain">[nyae]? n</code></div><div class="line number7 index6 alt2"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib2</code><code class="shell plain">...</code></div><div class="line number8 index7 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number9 index8 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">ls</code></div><div class="line number10 index9 alt1"><code class="shell plain">libs  project-infos.txt</code></div><div class="line number11 index10 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git submodule init</code></div><div class="line number12 index11 alt1"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib1'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib1'</code></div><div class="line number13 index12 alt2"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib2'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib2'</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number16 index15 alt1"><code class="shell comments"># On branch master</code></div><div class="line number17 index16 alt2"><code class="shell comments"># Changes to be committed:</code></div><div class="line number18 index17 alt1"><code class="shell comments">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</code></div><div class="line number19 index18 alt2"><code class="shell comments">#</code></div><div class="line number20 index19 alt1"><code class="shell comments">#   new file:   .gitmodules</code></div><div class="line number21 index20 alt2"><code class="shell comments">#   new file:   libs/lib1</code></div><div class="line number22 index21 alt1"><code class="shell comments">#   new file:   libs/lib2</code></div><div class="line number23 index22 alt2"><code class="shell comments">#</code></div><div class="line number24 index23 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git commit -a -m </code><code class="shell string">"add lib1 and lib2"</code></div><div class="line number25 index24 alt2"><code class="shell plain">[master 8dc697f] add lib1 and lib2</code></div><div class="line number26 index25 alt1"><code class="shell spaces"> </code><code class="shell plain">3 files changed, 8 insertions(+), 0 deletions(-)</code></div><div class="line number27 index26 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 .gitmodules</code></div><div class="line number28 index27 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 160000 libs</code><code class="shell plain">/lib1</code></div><div class="line number29 index28 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 160000 libs</code><code class="shell plain">/lib2</code></div><div class="line number30 index29 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) git push</code></div><div class="line number31 index30 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number32 index31 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number33 index32 alt2"><code class="shell plain">Compressing objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number34 index33 alt1"><code class="shell plain">Writing objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), 471 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number35 index34 alt2"><code class="shell plain">Total 4 (delta 0), reused 0 (delta 0)</code></div><div class="line number36 index35 alt1"><code class="shell plain">Unpacking objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number37 index36 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project2</code><code class="shell plain">.git</code></div><div class="line number38 index37 alt1"><code class="shell spaces">   </code><code class="shell plain">6e15c68..8dc697f  master -&gt; master</code></div><div class="line number39 index38 alt2"> </div><div class="line number40 index39 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>我们依次执行了添加submodule并commit和push到仓库，此阶段任务完成。</p>

<h3>2.6 修改lib1和lib2并同步到project1和project2</h3>

<p>假如开发人员C同时负责<strong>project1</strong>和<strong>project2</strong>，有可能在修改<strong>project1</strong>的某个功能的时候发现lib1或者lib2的某个组件有bug需要修复，这个需求多模块和大型系统中经常遇到，我们应该怎么解决呢？</p>

<p>假如我的需求如下：</p>

<ul>
<li><p>在lib1中添加一个文件：README，用来描述lib1的功能</p></li>
<li><p>在lib2中的lib2-features文件中添加一写文字：学习Git submodule的修改并同步功能</p></li>
</ul>


<h4>2.6.1 在lib1中添加一个文件：README</h4>

<div><div id="highlighter_393401" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">libs</code><code class="shell plain">/lib1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib1</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"lib1 readme contents"</code> <code class="shell plain">&gt; README</code></div><div class="line number3 index2 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib1</code> <code class="shell plain">git:(master) ✗ git add README </code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib1</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"add file README"</code></div><div class="line number5 index4 alt2"><code class="shell plain">[master 8c666d8] add </code><code class="shell functions">file</code> <code class="shell plain">README</code></div><div class="line number6 index5 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number7 index6 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 README</code></div><div class="line number8 index7 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib1</code> <code class="shell plain">git:(master) git push</code></div><div class="line number9 index8 alt2"><code class="shell plain">Counting objects: 4, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number10 index9 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number12 index11 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 310 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number13 index12 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number14 index13 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number15 index14 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git</code></div><div class="line number16 index15 alt1"><code class="shell spaces">   </code><code class="shell plain">36ad12d..8c666d8  master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<p>前面提到过现在仅仅只完成了一部分，我们需要在<strong>project2</strong>中再更新lib1的commit id：</p>

<div><div id="highlighter_463008" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git status </code></div><div class="line number2 index1 alt1"><code class="shell comments"># On branch master</code></div><div class="line number3 index2 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number4 index3 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number5 index4 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number6 index5 alt1"><code class="shell comments">#</code></div><div class="line number7 index6 alt2"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number8 index7 alt1"><code class="shell comments">#</code></div><div class="line number9 index8 alt2"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number10 index9 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git add libs</code><code class="shell plain">/lib1</code></div><div class="line number11 index10 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"update lib1 to lastest commit id"</code></div><div class="line number12 index11 alt1"><code class="shell plain">[master ce1f3ba] update lib1 to lastest commit </code><code class="shell functions">id</code></div><div class="line number13 index12 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 1 deletions(-)</code></div><div class="line number14 index13 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<pre><code>我们暂时不push到仓库，等待和lib2的修改一起push。
</code></pre>

<h4>2.6.2 在lib2中的lib2-features文件添加文字</h4>

<div><div id="highlighter_207666" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">libs</code><code class="shell plain">/lib2</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"学习Git submodule的修改并同步功能"</code> <code class="shell plain">&gt;&gt; lib2-features </code></div><div class="line number3 index2 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) ✗ git add lib2-features </code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"添加文字：学习Git submodule的修改并同步功能"</code></div><div class="line number5 index4 alt2"><code class="shell plain">[master e372b21] 添加文字：学习Git submodule的修改并同步功能</code></div><div class="line number6 index5 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) git push</code></div><div class="line number8 index7 alt1"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number9 index8 alt2"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number10 index9 alt1"><code class="shell plain">Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 376 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number12 index11 alt1"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number13 index12 alt2"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number14 index13 alt1"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git</code></div><div class="line number15 index14 alt2"><code class="shell spaces">   </code><code class="shell plain">7290dce..e372b21  master -&gt; master</code></div><div class="line number16 index15 alt1"> </div><div class="line number17 index16 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) </code><code class="shell functions">echo</code> <code class="shell string">"学习Git submodule的修改并同步功能"</code> <code class="shell plain">&gt;&gt; lib2-features </code></div><div class="line number18 index17 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) ✗ git add lib2-features </code></div><div class="line number19 index18 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"添加文字：学习Git submodule的修改并同步功能"</code></div><div class="line number20 index19 alt1"><code class="shell plain">[master e372b21] 添加文字：学习Git submodule的修改并同步功能</code></div><div class="line number21 index20 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number22 index21 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) git push</code></div><div class="line number23 index22 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number24 index23 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number25 index24 alt2"><code class="shell plain">Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number26 index25 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 376 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number27 index26 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number28 index27 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number29 index28 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git</code></div><div class="line number30 index29 alt1"><code class="shell spaces">   </code><code class="shell plain">7290dce..e372b21  master -&gt; master</code></div><div class="line number31 index30 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2/libs/lib2</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">-</code></div><div class="line number32 index31 alt1"><code class="shell plain">~</code><code class="shell plain">/submd/ws/project2</code></div><div class="line number33 index32 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git status </code></div><div class="line number34 index33 alt1"><code class="shell comments"># On branch master</code></div><div class="line number35 index34 alt2"><code class="shell comments"># Your branch is ahead of 'origin/master' by 1 commit.</code></div><div class="line number36 index35 alt1"><code class="shell comments">#</code></div><div class="line number37 index36 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number38 index37 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number39 index38 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number40 index39 alt1"><code class="shell comments">#</code></div><div class="line number41 index40 alt2"><code class="shell comments">#   modified:   libs/lib2 (new commits)</code></div><div class="line number42 index41 alt1"><code class="shell comments">#</code></div><div class="line number43 index42 alt2"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number44 index43 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git add libs</code><code class="shell plain">/lib2</code> </div><div class="line number45 index44 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"update lib2 to lastest commit id"</code></div><div class="line number46 index45 alt1"><code class="shell plain">[master df344c5] update lib2 to lastest commit </code><code class="shell functions">id</code></div><div class="line number47 index46 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 1 deletions(-)</code></div><div class="line number48 index47 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) git status </code></div><div class="line number49 index48 alt2"><code class="shell comments"># On branch master</code></div><div class="line number50 index49 alt1"><code class="shell comments"># Your branch is ahead of 'origin/master' by 2 commits.</code></div><div class="line number51 index50 alt2"><code class="shell comments">#</code></div><div class="line number52 index51 alt1"><code class="shell plain">nothing to commit (working directory clean)</code></div><div class="line number53 index52 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) git push</code></div><div class="line number54 index53 alt1"><code class="shell plain">Counting objects: 8, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number55 index54 alt2"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number56 index55 alt1"><code class="shell plain">Compressing objects: 100% (6</code><code class="shell plain">/6</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number57 index56 alt2"><code class="shell plain">Writing objects: 100% (6</code><code class="shell plain">/6</code><code class="shell plain">), 776 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number58 index57 alt1"><code class="shell plain">Total 6 (delta 0), reused 0 (delta 0)</code></div><div class="line number59 index58 alt2"><code class="shell plain">Unpacking objects: 100% (6</code><code class="shell plain">/6</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number60 index59 alt1"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project2</code><code class="shell plain">.git</code></div><div class="line number61 index60 alt2"><code class="shell spaces">   </code><code class="shell plain">8dc697f..df344c5  master -&gt; master</code></div><div class="line number62 index61 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<h3>2.7 同步project2的lib1和lib2的修改到project1</h3>

<p>现在project2已经享受到了最新的代码带来的<strong>快乐</strong>，那么既然project1和project2属于同一个风格，或者调用同一个功能，要让这两个(可能几十个)项目保持一致。</p>

<div><div id="highlighter_756434" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">..</code><code class="shell plain">/project1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git pull</code></div><div class="line number3 index2 alt2"><code class="shell plain">Already up-to-</code><code class="shell functions">date</code><code class="shell plain">.</code></div></div></td></tr></tbody></table></div></div>


<p>看看上面的结果对吗？为什么lib1和lib2更新了但是没有显示<strong>new commits</strong>呢？说到这里我记得刚刚开始学习的时候真得要晕死了，Git跟我玩捉迷藏游戏，为什么我明明提交了但是从<strong>project1</strong>更新不到任何改动呢？</p>

<p>帮大家分析一下问题，不过在分析之前先看看当前(project1和project2)的submodule状态：</p>

<div><div id="highlighter_405681" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell comments"># project2 的状态，也就是我们刚刚修改后的状态</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project2</code> <code class="shell plain">git:(master) git submodule </code></div><div class="line number3 index2 alt2"><code class="shell spaces"> </code><code class="shell plain">8c666d86531513dd1aebdf235f142adbac72c035 libs</code><code class="shell plain">/lib1</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div><div class="line number4 index3 alt1"><code class="shell spaces"> </code><code class="shell plain">e372b21dffa611802c282278ec916b5418acebc2 libs</code><code class="shell plain">/lib2</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div><div class="line number5 index4 alt2"> </div><div class="line number6 index5 alt1"><code class="shell comments"># project1 的状态，等待更新submodules</code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git submodule </code></div><div class="line number8 index7 alt1"><code class="shell spaces"> </code><code class="shell plain">36ad12d40d8a41a4a88a64add27bd57cf56c9de2 libs</code><code class="shell plain">/lib1</code> <code class="shell plain">(remotes</code><code class="shell plain">/origin/HEAD</code><code class="shell plain">)</code></div><div class="line number9 index8 alt2"><code class="shell spaces"> </code><code class="shell plain">7290dce0062bd77df1d83b27dd3fa3f25a836b54 libs</code><code class="shell plain">/lib2</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div></div></td></tr></tbody></table></div></div>


<p>两个项目有两个区别：</p>

<ul>
<li><p>commit id各不相同</p></li>
<li><p><strong>libs/lib1</strong>所处的分支不同</p></li>
</ul>


<h4>2.7.1 更新project1的lib1和lib2改动</h4>

<p>我们还记得刚刚在<strong>project2</strong>中修改的时候把lib1和lib2都切换到了master分支，目前project1中的lib1不在任何分支，我们先切换到master分支：</p>

<div><div id="highlighter_654252" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">libs</code><code class="shell plain">/lib1</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1/libs/lib1</code>  <code class="shell plain">git checkout master</code></div><div class="line number3 index2 alt2"><code class="shell plain">Previous HEAD position was 36ad12d... update lib1-features by developer B</code></div><div class="line number4 index3 alt1"><code class="shell plain">Switched to branch </code><code class="shell string">'master'</code></div><div class="line number5 index4 alt2"><code class="shell plain">Your branch is behind </code><code class="shell string">'origin/master'</code> <code class="shell plain">by 1 commit, and can be fast-forwarded.</code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1/libs/lib1</code> <code class="shell plain">git:(master) git pull</code></div><div class="line number7 index6 alt2"><code class="shell plain">remote: Counting objects: 4, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number8 index7 alt1"><code class="shell plain">remote: Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number9 index8 alt2"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number10 index9 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code></div><div class="line number12 index11 alt1"><code class="shell spaces">   </code><code class="shell plain">36ad12d..8c666d8  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number13 index12 alt2"><code class="shell plain">Updating c22aff8..8c666d8</code></div><div class="line number14 index13 alt1"><code class="shell plain">Fast-forward</code></div><div class="line number15 index14 alt2"><code class="shell spaces"> </code><code class="shell plain">README        |    1 +</code></div><div class="line number16 index15 alt1"><code class="shell spaces"> </code><code class="shell plain">lib1-features |    1 +</code></div><div class="line number17 index16 alt2"><code class="shell spaces"> </code><code class="shell plain">2 files changed, 2 insertions(+), 0 deletions(-)</code></div><div class="line number18 index17 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 README</code></div><div class="line number19 index18 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1/libs/lib1</code> <code class="shell plain">git:(master) </code></div></div></td></tr></tbody></table></div></div>


<p>果不其然，我们看到了刚刚在project2中修改的内容，同步到了project1中，当然现在更新了<strong>project1</strong>的<strong>lib1</strong>，commit id也会随之变动：</p>

<div><div id="highlighter_153985" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1/libs/lib1</code> <code class="shell plain">git:(master) </code><code class="shell functions">cd</code> <code class="shell plain">../../</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git status </code></div><div class="line number3 index2 alt2"><code class="shell comments"># On branch master</code></div><div class="line number4 index3 alt1"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number5 index4 alt2"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number6 index5 alt1"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number7 index6 alt2"><code class="shell comments">#</code></div><div class="line number8 index7 alt1"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number9 index8 alt2"><code class="shell comments">#</code></div><div class="line number10 index9 alt1"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number11 index10 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git </code><code class="shell functions">diff</code></div><div class="line number12 index11 alt1"><code class="shell functions">diff</code> <code class="shell plain">--git a</code><code class="shell plain">/libs/lib1</code> <code class="shell plain">b</code><code class="shell plain">/libs/lib1</code></div><div class="line number13 index12 alt2"><code class="shell plain">index 36ad12d..8c666d8 160000</code></div><div class="line number14 index13 alt1"><code class="shell plain">--- a</code><code class="shell plain">/libs/lib1</code></div><div class="line number15 index14 alt2"><code class="shell plain">+++ b</code><code class="shell plain">/libs/lib1</code></div><div class="line number16 index15 alt1"><code class="shell plain">@@ -1 +1 @@</code></div><div class="line number17 index16 alt2"><code class="shell plain">-Subproject commit 36ad12d40d8a41a4a88a64add27bd57cf56c9de2</code></div><div class="line number18 index17 alt1"><code class="shell plain">+Subproject commit 8c666d86531513dd1aebdf235f142adbac72c035</code></div><div class="line number19 index18 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>现在最新的commit id和project2目前的状态一致，说明真的同步了；好的，现在可以使用相同的办法更新<strong>lib2</strong>了：</p>

<div><div id="highlighter_885905" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">cd</code> <code class="shell plain">libs</code><code class="shell plain">/lib2</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1/libs/lib2</code> <code class="shell plain">git:(master) git pull</code></div><div class="line number3 index2 alt2"><code class="shell plain">remote: Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">remote: Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number5 index4 alt2"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number6 index5 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number7 index6 alt2"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/repos/lib2</code></div><div class="line number8 index7 alt1"><code class="shell spaces">   </code><code class="shell plain">7290dce..e372b21  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number9 index8 alt2"><code class="shell plain">Updating 7290dce..e372b21</code></div><div class="line number10 index9 alt1"><code class="shell plain">Fast-forward</code></div><div class="line number11 index10 alt2"><code class="shell spaces"> </code><code class="shell plain">lib2-features |    1 +</code></div><div class="line number12 index11 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div></div></td></tr></tbody></table></div></div>


<h4>2.7.2 更新project1的submodule引用</h4>

<p>在<strong>2.7.1</strong>中我们更新了<strong>project1</strong>的<strong>lib1</strong>和<strong>lib2</strong>的最新版本，现在要把最新的commit id保存到<strong>project1</strong>中以保持最新的引用。</p>

<div><div id="highlighter_990400" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number2 index1 alt1"><code class="shell comments"># On branch master</code></div><div class="line number3 index2 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number4 index3 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number5 index4 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number6 index5 alt1"><code class="shell comments">#</code></div><div class="line number7 index6 alt2"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number8 index7 alt1"><code class="shell comments">#   modified:   libs/lib2 (new commits)</code></div><div class="line number9 index8 alt2"><code class="shell comments">#</code></div><div class="line number10 index9 alt1"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number11 index10 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) ✗ git commit -a -m </code><code class="shell string">"update lib1 and lib2 commit id to new version"</code></div><div class="line number12 index11 alt1"><code class="shell plain">[master 8fcca50] update lib1 and lib2 commit </code><code class="shell functions">id</code> <code class="shell plain">to new version</code></div><div class="line number13 index12 alt2"><code class="shell spaces"> </code><code class="shell plain">2 files changed, 2 insertions(+), 2 deletions(-)</code></div><div class="line number14 index13 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1</code> <code class="shell plain">git:(master) git push</code></div><div class="line number15 index14 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number16 index15 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number17 index16 alt2"><code class="shell plain">Compressing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number18 index17 alt1"><code class="shell plain">Writing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), 397 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number19 index18 alt2"><code class="shell plain">Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number20 index19 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number21 index20 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number22 index21 alt1"><code class="shell spaces">   </code><code class="shell plain">c96838a..8fcca50  master -&gt; master</code></div><div class="line number23 index22 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<h3>2.8 更新project1-b项目的子模块(使用脚本)</h3>

<div><div id="highlighter_899805" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) git pull</code></div><div class="line number2 index1 alt1"><code class="shell plain">remote: Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number3 index2 alt2"><code class="shell plain">remote: Compressing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number5 index4 alt2"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number6 index5 alt1"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code></div><div class="line number7 index6 alt2"><code class="shell spaces">   </code><code class="shell plain">c96838a..8fcca50  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number8 index7 alt1"><code class="shell plain">Updating c96838a..8fcca50</code></div><div class="line number9 index8 alt2"><code class="shell plain">Fast-forward</code></div><div class="line number10 index9 alt1"><code class="shell spaces"> </code><code class="shell plain">libs</code><code class="shell plain">/lib1</code> <code class="shell plain">|    2 +-</code></div><div class="line number11 index10 alt2"><code class="shell spaces"> </code><code class="shell plain">libs</code><code class="shell plain">/lib2</code> <code class="shell plain">|    2 +-</code></div><div class="line number12 index11 alt1"><code class="shell spaces"> </code><code class="shell plain">2 files changed, 2 insertions(+), 2 deletions(-)</code></div><div class="line number13 index12 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number14 index13 alt1"><code class="shell comments"># On branch master</code></div><div class="line number15 index14 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number16 index15 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to update what will be committed)</code></div><div class="line number17 index16 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number18 index17 alt1"><code class="shell comments">#</code></div><div class="line number19 index18 alt2"><code class="shell comments">#   modified:   libs/lib1 (new commits)</code></div><div class="line number20 index19 alt1"><code class="shell comments">#   modified:   libs/lib2 (new commits)</code></div><div class="line number21 index20 alt2"><code class="shell comments">#</code></div><div class="line number22 index21 alt1"><code class="shell plain">no changes added to commit (use </code><code class="shell string">"git add"</code> <code class="shell plain">and</code><code class="shell plain">/or</code> <code class="shell string">"git commit -a"</code><code class="shell plain">)</code></div><div class="line number23 index22 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>Git提示lib1和lib2有更新内容，这个判断的依据来源于submodule commit id的引用。</p>

<p>现在怎么更新呢？难道还是像project1中那样进入子模块的目录然后<strong>git checkout master</strong>，接着<strong>git pull</strong>？</p>

<p>而且现在仅仅才两个子模块、两个项目，如果在真实的项目中使用的话可能几个到几十个不等，再加上N个submodule，自己算一下要怎么更新多少个submodules？</p>

<p>例如笔者现在做的一个项目有<strong>5</strong>个web模块，每个web模块引用公共的css、js、images、jsp资源，这样就有20个submodule需要更新！！！</p>

<p><strong>工欲善其事，必先利其器</strong>，写一个脚本代替手动任务。</p>

<h4>2.8.1 牛刀小试</h4>

<div><div id="highlighter_719830" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">grep</code> <code class="shell plain">path .gitmodules | </code><code class="shell functions">awk</code> <code class="shell string">'{ print $3 }'</code> <code class="shell plain">&gt; </code><code class="shell plain">/tmp/study-git-submodule-dirs</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">cat</code> <code class="shell plain">/tmp/study-git-submodule-dirs</code></div><div class="line number3 index2 alt2"><code class="shell spaces"> </code><code class="shell plain">libs</code><code class="shell plain">/lib1</code></div><div class="line number4 index3 alt1"><code class="shell spaces"> </code><code class="shell plain">libs</code><code class="shell plain">/lib2</code></div></div></td></tr></tbody></table></div></div>


<p>我们通过分析<strong>.gitmodules</strong>文件得出子模块的路径，然后就可以根据这些路径进行更新。</p>

<h4>2.8.2 上路</h4>

<div><div id="highlighter_243087" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">mkdir</code> <code class="shell plain">bin</code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">vi</code> <code class="shell plain">bin</code><code class="shell plain">/update-submodules</code><code class="shell plain">.sh</code></div></div></td></tr></tbody></table></div></div>


<p>把下面的脚本复制到<strong>bin/update-submodules.sh</strong>中：</p>

<div><div id="highlighter_275939" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell preprocessor bold">#!/bin/bash</code></div><div class="line number2 index1 alt1"><code class="shell functions">grep</code> <code class="shell plain">path .gitmodules | </code><code class="shell functions">awk</code> <code class="shell string">'{ print $3 }'</code> <code class="shell plain">&gt; </code><code class="shell plain">/tmp/study-git-submodule-dirs</code></div><div class="line number3 index2 alt2"> </div><div class="line number4 index3 alt1"><code class="shell comments"># read</code></div><div class="line number5 index4 alt2"><code class="shell keyword">while</code> <code class="shell functions">read</code> <code class="shell plain">LINE</code></div><div class="line number6 index5 alt1"><code class="shell keyword">do</code></div><div class="line number7 index6 alt2"><code class="shell spaces">    </code><code class="shell functions">echo</code> <code class="shell plain">$LINE</code></div><div class="line number8 index7 alt1"><code class="shell spaces">    </code><code class="shell plain">(</code><code class="shell functions">cd</code> <code class="shell plain">./$LINE &amp;&amp; git checkout master &amp;&amp; git pull)</code></div><div class="line number9 index8 alt2"><code class="shell keyword">done</code> <code class="shell plain">&lt; </code><code class="shell plain">/tmp/study-git-submodule-dirs</code></div></div></td></tr></tbody></table></div></div>


<p>稍微解释一下上面的脚本执行过程：</p>

<ul>
<li><p>首先把子模块的路径写入到文件<strong>/tmp/study-git-submodule-dirs</strong>中；</p></li>
<li><p>然后读取文件中的子模块路径，依次切换到master分支(修改都是在master分支上进行的)，最后更新最近改动。</p></li>
</ul>


<h4>2.8.3 <font color="red">2013-01-19更新</font></h4>

<p>网友<strong>@紫煌</strong>给出了更好的办法，一个命令就可以代替上面的<strong>bin/update-submodules.sh</strong>的功能：</p>

<div><div id="highlighter_861805" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">git submodule foreach git pull</code></div></div></td></tr></tbody></table></div></div>


<p>此命令也脚本一样，循环进入（enter）每个子模块的目录，然后执行<strong>foreach</strong>后面的命令。</p>

<blockquote><p>该后面的命令可以任意的，例如 git submodule foreach ls -l 可以列出每个子模块的文件列表</p></blockquote>

<h4>2.8.3 体验工具带来的便利</h4>

<div><div id="highlighter_150375" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git submodule </code></div><div class="line number2 index1 alt1"><code class="shell plain">+36ad12d40d8a41a4a88a64add27bd57cf56c9de2 libs</code><code class="shell plain">/lib1</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div><div class="line number3 index2 alt2"><code class="shell plain">+7290dce0062bd77df1d83b27dd3fa3f25a836b54 libs</code><code class="shell plain">/lib2</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="shell comments"># 添加执行权限</code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">chmod</code> <code class="shell plain">+x .</code><code class="shell plain">/bin/update-submodules</code><code class="shell plain">.sh</code></div><div class="line number7 index6 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ .</code><code class="shell plain">/bin/update-submodules</code><code class="shell plain">.sh </code></div><div class="line number8 index7 alt1"><code class="shell plain">libs</code><code class="shell plain">/lib1</code></div><div class="line number9 index8 alt2"><code class="shell plain">Already on </code><code class="shell string">'master'</code></div><div class="line number10 index9 alt1"><code class="shell plain">remote: Counting objects: 4, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">remote: Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number12 index11 alt1"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number13 index12 alt2"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number14 index13 alt1"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/repos/lib1</code></div><div class="line number15 index14 alt2"><code class="shell spaces">   </code><code class="shell plain">36ad12d..8c666d8  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number16 index15 alt1"><code class="shell plain">Updating 36ad12d..8c666d8</code></div><div class="line number17 index16 alt2"><code class="shell plain">Fast-forward</code></div><div class="line number18 index17 alt1"><code class="shell spaces"> </code><code class="shell plain">README |    1 +</code></div><div class="line number19 index18 alt2"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number20 index19 alt1"><code class="shell spaces"> </code><code class="shell plain">create mode 100644 README</code></div><div class="line number21 index20 alt2"><code class="shell plain">libs</code><code class="shell plain">/lib2</code></div><div class="line number22 index21 alt1"><code class="shell plain">Switched to branch </code><code class="shell string">'master'</code></div><div class="line number23 index22 alt2"><code class="shell plain">remote: Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number24 index23 alt1"><code class="shell plain">remote: Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number25 index24 alt2"><code class="shell plain">remote: Total 3 (delta 0), reused 0 (delta 0)</code></div><div class="line number26 index25 alt1"><code class="shell plain">Unpacking objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number27 index26 alt2"><code class="shell plain">From </code><code class="shell plain">/home/henryyan/submd/repos/lib2</code></div><div class="line number28 index27 alt1"><code class="shell spaces">   </code><code class="shell plain">7290dce..e372b21  master     -&gt; origin</code><code class="shell plain">/master</code></div><div class="line number29 index28 alt2"><code class="shell plain">Updating 7290dce..e372b21</code></div><div class="line number30 index29 alt1"><code class="shell plain">Fast-forward</code></div><div class="line number31 index30 alt2"><code class="shell spaces"> </code><code class="shell plain">lib2-features |    1 +</code></div><div class="line number32 index31 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 1 insertions(+), 0 deletions(-)</code></div><div class="line number33 index32 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git submodule </code></div><div class="line number34 index33 alt1"><code class="shell spaces"> </code><code class="shell plain">8c666d86531513dd1aebdf235f142adbac72c035 libs</code><code class="shell plain">/lib1</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div><div class="line number35 index34 alt2"><code class="shell spaces"> </code><code class="shell plain">e372b21dffa611802c282278ec916b5418acebc2 libs</code><code class="shell plain">/lib2</code> <code class="shell plain">(heads</code><code class="shell plain">/master</code><code class="shell plain">)</code></div><div class="line number36 index35 alt1"> </div><div class="line number37 index36 alt2"><code class="shell spaces"> </code><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git status </code></div><div class="line number38 index37 alt1"><code class="shell comments"># On branch master</code></div><div class="line number39 index38 alt2"><code class="shell comments"># Untracked files:</code></div><div class="line number40 index39 alt1"><code class="shell comments">#   (use "git add &lt;file&gt;..." to include in what will be committed)</code></div><div class="line number41 index40 alt2"><code class="shell comments">#</code></div><div class="line number42 index41 alt1"><code class="shell comments">#   bin/</code></div><div class="line number43 index42 alt2"><code class="shell plain">nothing added to commit but untracked files present (use </code><code class="shell string">"git add"</code> <code class="shell plain">to track)</code></div><div class="line number44 index43 alt1"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<p>更新之后的两个变化：</p>

<ul>
<li><p>git submodule的结果和project2的submodule commit id保持一致；</p></li>
<li><p><strong>project1-b</strong>不再提示<strong>new commits</strong>了。</p></li>
</ul>


<p>现在可以把工具添加到仓库了，当然你可以很骄傲的分享给其他项目组的同事。</p>

<div><div id="highlighter_265831" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git add bin</code><code class="shell plain">/update-submodules</code><code class="shell plain">.sh </code></div><div class="line number2 index1 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"添加自动更新submodule的快捷脚本^_^"</code></div><div class="line number3 index2 alt2"><code class="shell plain">[master 756e788] 添加自动更新submodule的快捷脚本^_^</code></div><div class="line number4 index3 alt1"><code class="shell spaces"> </code><code class="shell plain">1 files changed, 9 insertions(+), 0 deletions(-)</code></div><div class="line number5 index4 alt2"><code class="shell spaces"> </code><code class="shell plain">create mode 100755 bin</code><code class="shell plain">/update-submodules</code><code class="shell plain">.sh</code></div><div class="line number6 index5 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-b</code> <code class="shell plain">git:(master) git push</code></div><div class="line number7 index6 alt2"><code class="shell plain">Counting objects: 5, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number8 index7 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number9 index8 alt2"><code class="shell plain">Compressing objects: 100% (3</code><code class="shell plain">/3</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number10 index9 alt1"><code class="shell plain">Writing objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), 625 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Total 4 (delta 0), reused 0 (delta 0)</code></div><div class="line number12 index11 alt1"><code class="shell plain">Unpacking objects: 100% (4</code><code class="shell plain">/4</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number13 index12 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number14 index13 alt1"><code class="shell spaces">   </code><code class="shell plain">8fcca50..756e788  master -&gt; master</code></div></div></td></tr></tbody></table></div></div>


<h3>2.9 新进员工加入团队，一次性Clone项目和Submodules</h3>

<p>一般人使用的时候都是使用如下命令：</p>

<div><div id="highlighter_362471" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">git clone </code><code class="shell plain">/path/to/repos/foo</code><code class="shell plain">.git</code></div><div class="line number2 index1 alt1"><code class="shell plain">git submodule init</code></div><div class="line number3 index2 alt2"><code class="shell plain">git submodule update</code></div></div></td></tr></tbody></table></div></div>


<pre><code>新员工不耐烦了，嘴上不说但是心里想：怎么那么麻烦？
</code></pre>

<p>上面的命令简直弱暴了，直接一行命令搞定：</p>

<div><div id="highlighter_884390" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">git clone --recursive </code><code class="shell plain">/path/to/repos/foo</code><code class="shell plain">.git</code></div></div></td></tr></tbody></table></div></div>


<p>–<strong>recursive</strong>参数的含义：可以在clone项目时同时clone关联的submodules。</p>

<p>git help 对其解释：</p>

<pre>--recursive, --recurse-submodules
   After the clone is created, initialize all submodules within, using their default settings. This is equivalent to running git
   submodule update --init --recursive immediately after the clone is finished. This option is ignored if the cloned repository
   does not have a worktree/checkout (i.e. if any of --no-checkout/-n, --bare, or --mirror is given)
</pre>


<h4>2.9.1 使用一键方式克隆project2</h4>

<div><div id="highlighter_57288" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone --recursive ..</code><code class="shell plain">/repos/project2</code><code class="shell plain">.git project2-auto-clone-submodules</code></div><div class="line number2 index1 alt1"><code class="shell plain">Cloning into project2-auto-clone-submodules...</code></div><div class="line number3 index2 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib1'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib1'</code></div><div class="line number5 index4 alt2"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib2'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib2'</code></div><div class="line number6 index5 alt1"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib1</code><code class="shell plain">...</code></div><div class="line number7 index6 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number8 index7 alt1"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib1'</code><code class="shell plain">: checked out </code><code class="shell string">'8c666d86531513dd1aebdf235f142adbac72c035'</code></div><div class="line number9 index8 alt2"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib2</code><code class="shell plain">...</code></div><div class="line number10 index9 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib2'</code><code class="shell plain">: checked out </code><code class="shell string">'e372b21dffa611802c282278ec916b5418acebc2'</code></div></div></td></tr></tbody></table></div></div>


<p>舒服……</p>

<h2>3.移除Submodule</h2>

<p><strong>牢骚</strong>：搞不明白为什么git不设计一个类似：git submodule remove的命令呢？</p>

<p>我们从project1.git克隆一个项目用来练习移除submodule：</p>

<div><div id="highlighter_315962" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell plain">git clone --recursive ..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git project1-remove-submodules</code></div><div class="line number2 index1 alt1"><code class="shell plain">Cloning into project1-remove-submodules...</code></div><div class="line number3 index2 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number4 index3 alt1"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib1'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib1</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib1'</code></div><div class="line number5 index4 alt2"><code class="shell plain">Submodule </code><code class="shell string">'libs/lib2'</code> <code class="shell plain">(</code><code class="shell plain">/home/henryyan/submd/repos/lib2</code><code class="shell plain">.git) registered </code><code class="shell keyword">for</code> <code class="shell plain">path </code><code class="shell string">'libs/lib2'</code></div><div class="line number6 index5 alt1"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib1</code><code class="shell plain">...</code></div><div class="line number7 index6 alt2"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number8 index7 alt1"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib1'</code><code class="shell plain">: checked out </code><code class="shell string">'8c666d86531513dd1aebdf235f142adbac72c035'</code></div><div class="line number9 index8 alt2"><code class="shell plain">Cloning into libs</code><code class="shell plain">/lib2</code><code class="shell plain">...</code></div><div class="line number10 index9 alt1"><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number11 index10 alt2"><code class="shell plain">Submodule path </code><code class="shell string">'libs/lib2'</code><code class="shell plain">: checked out </code><code class="shell string">'e372b21dffa611802c282278ec916b5418acebc2'</code></div><div class="line number12 index11 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">!$</code></div><div class="line number13 index12 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws</code>  <code class="shell functions">cd</code> <code class="shell plain">project1-remove-submodules</code></div></div></td></tr></tbody></table></div></div>


<h3>3.1 Step by</h3>

<p>1、删除git cache和物理文件夹</p>

<div><div id="highlighter_687357" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) git </code><code class="shell functions">rm</code> <code class="shell plain">-r --cached libs/</code></div><div class="line number2 index1 alt1"><code class="shell functions">rm</code> <code class="shell string">'libs/lib1'</code></div><div class="line number3 index2 alt2"><code class="shell functions">rm</code> <code class="shell string">'libs/lib2'</code></div><div class="line number4 index3 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">rm</code> <code class="shell plain">-rf libs</code></div></div></td></tr></tbody></table></div></div>


<p>2、删除.gitmodules的内容（或者整个文件）
因为本例只有两个子模块，直接删除文件：</p>

<div><div id="highlighter_973106" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) ✗ </code><code class="shell functions">rm</code> <code class="shell plain">.gitmodules</code></div></div></td></tr></tbody></table></div></div>


<pre><code>如果仅仅删除某一个submodule那么打开.gitmodules文件编辑，删除对应submodule配置即可。
</code></pre>

<p>3、删除.git/config的submodule配置
源文件：</p>

<pre>[core]
    repositoryformatversion = 0 
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = /home/henryyan/submd/ws/../repos/project1.git
[branch "master"]
    remote = origin
    merge = refs/heads/master
[submodule "libs/lib1"]
    url = /home/henryyan/submd/repos/lib1.git
[submodule "libs/lib2"]
    url = /home/henryyan/submd/repos/lib2.git
</pre>


<p>删除后：</p>

<pre>[core]
    repositoryformatversion = 0 
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = /home/henryyan/submd/ws/../repos/project1.git
[branch "master"]
    remote = origin
    merge = refs/heads/master
</pre>


<p>4、提交更改</p>

<div><div id="highlighter_252848" class="syntaxhighlighter  shell"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) ✗ git status</code></div><div class="line number2 index1 alt1"><code class="shell comments"># On branch master</code></div><div class="line number3 index2 alt2"><code class="shell comments"># Changes to be committed:</code></div><div class="line number4 index3 alt1"><code class="shell comments">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</code></div><div class="line number5 index4 alt2"><code class="shell comments">#</code></div><div class="line number6 index5 alt1"><code class="shell comments">#   deleted:    libs/lib1</code></div><div class="line number7 index6 alt2"><code class="shell comments">#   deleted:    libs/lib2</code></div><div class="line number8 index7 alt1"><code class="shell comments">#</code></div><div class="line number9 index8 alt2"><code class="shell comments"># Changes not staged for commit:</code></div><div class="line number10 index9 alt1"><code class="shell comments">#   (use "git add/rm &lt;file&gt;..." to update what will be committed)</code></div><div class="line number11 index10 alt2"><code class="shell comments">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</code></div><div class="line number12 index11 alt1"><code class="shell comments">#</code></div><div class="line number13 index12 alt2"><code class="shell comments">#   deleted:    .gitmodules</code></div><div class="line number14 index13 alt1"><code class="shell comments">#</code></div><div class="line number15 index14 alt2"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) ✗ git add .gitmodules</code></div><div class="line number16 index15 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) ✗ git commit -m </code><code class="shell string">"删除子模块lib1和lib2"</code></div><div class="line number17 index16 alt2"><code class="shell plain">[master 5e2ee71] 删除子模块lib1和lib2</code></div><div class="line number18 index17 alt1"><code class="shell spaces"> </code><code class="shell plain">3 files changed, 0 insertions(+), 8 deletions(-)</code></div><div class="line number19 index18 alt2"><code class="shell spaces"> </code><code class="shell plain">delete mode 100644 .gitmodules</code></div><div class="line number20 index19 alt1"><code class="shell spaces"> </code><code class="shell plain">delete mode 160000 libs</code><code class="shell plain">/lib1</code></div><div class="line number21 index20 alt2"><code class="shell spaces"> </code><code class="shell plain">delete mode 160000 libs</code><code class="shell plain">/lib2</code></div><div class="line number22 index21 alt1"><code class="shell plain">➜ henryyan@hy-hp  ~</code><code class="shell plain">/submd/ws/project1-remove-submodules</code> <code class="shell plain">git:(master) git push</code></div><div class="line number23 index22 alt2"><code class="shell plain">Counting objects: 3, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number24 index23 alt1"><code class="shell plain">Delta compression using up to 2 threads.</code></div><div class="line number25 index24 alt2"><code class="shell plain">Compressing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number26 index25 alt1"><code class="shell plain">Writing objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), 302 bytes, </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number27 index26 alt2"><code class="shell plain">Total 2 (delta 0), reused 0 (delta 0)</code></div><div class="line number28 index27 alt1"><code class="shell plain">Unpacking objects: 100% (2</code><code class="shell plain">/2</code><code class="shell plain">), </code><code class="shell keyword">done</code><code class="shell plain">.</code></div><div class="line number29 index28 alt2"><code class="shell plain">To </code><code class="shell plain">/home/henryyan/submd/ws/</code><code class="shell plain">..</code><code class="shell plain">/repos/project1</code><code class="shell plain">.git</code></div><div class="line number30 index29 alt1"><code class="shell spaces">   </code><code class="shell plain">756e788..5e2ee71  master -&gt; master</code></div><div class="line number31 index30 alt2"><code class="shell plain">&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;&lt;</code><code class="shell plain">/file</code><code class="shell plain">&gt;</code></div></div></td></tr></tbody></table></div></div>


<h2>4.结束语</h2>

<p>对于Git Submodule来说在刚刚接触的时候多少会有点凌乱的赶紧，尤其是没有接触过<strong>svn:externals</strong>。</p>

<p>本文从开始创建项目到使用git submodule的每个步骤以及细节、原理逐一讲解，希望到此读者能驾驭它。</p>

<p>学会了Git submdoule你的项目中再也不会出现大量重复的资源文件、公共类库，更不会出现多个版本，甚至一个客户的多个项目风格存在各种差异。</p>

<p>本文的写作来源于工作中的实践，如果您对于某个做法有更好的办法还请赐教，希望能留下您宝贵的意见。</p>

<p><em>原创文章，转载请注明出处！</em>
<em><a href="#">Git Submoudle使用完整教程--咖啡兔</a></em></p>
</div>
  <div class="original-post corner-all"><strong>原创文章，转载请注明：</strong>转载自：<a href="#">Git Submodule使用完整教程</a></div>
</div>

<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_32x32">
  <a title="分享到微信" class="jiathis_button_weixin"><span class="jiathis_txt jtico jtico_weixin"></span></a>
  <a title="分享到新浪微博" class="jiathis_button_tsina"><span class="jiathis_txt jtico jtico_tsina"></span></a>
  <a title="分享到豆瓣" class="jiathis_button_douban"><span class="jiathis_txt jtico jtico_douban"></span></a>
  <a title="复制网址" class="jiathis_button_copy"><span class="jiathis_txt jtico jtico_copy"></span></a>
  <a title="分享到印象笔记" class="jiathis_button_evernote"><span class="jiathis_txt jtico jtico_evernote"></span></a>
  <a href="http://www.jiathis.com/share?uid=1537991" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"><span title="累计分享24次" id="jiathis_counter_25" class="jiathis_button_expanded jiathis_counter jiathis_bubble_style">24</span></a>
</div>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
<script type="text/javascript" src="index_files/jia.js" charset="utf-8"></script><script type="text/javascript" src="index_files/plugin.client.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

<!-- Wumii Related BEGIN -->
<div id="comments" style="padding-bottom: 1em;">
<div class="wumii-hook"><div id="wumiiBtnDiv" style="clear:both;overflow:visible;position:relative;left:0;top:0;height:28px;margin:0;padding:10px 0 0;text-shadow: none;text-indent:0;">
    <div id="wumiiLikeBtnDiv" style="position: static; float: left; display: inline; width: 89px; height: 28px; margin: 0px 0px 0px 398px; padding: 0px; background: url(&quot;index_files/widget_buttons_deepBlue.png&quot;) no-repeat scroll 0px 0px transparent; text-indent: 0px;" onmouseover="" onmouseout="">
        <a href="http://www.wumii.com/item/b0YNbtmh" target="_blank" id="wumiiNumLikes" style="float:left;width:38px;height:20px;line-height:21px;margin:4px 0 0 4px;padding:0;border:none;background-color:#fff;color:#385c80;letter-spacing:0;text-decoration:none;text-align:center;text-indent:0;font-size:12px;" onmouseover="" onmouseout="">21</a>
        <span style="float:left;width:40px;height:29px;margin:0;padding:0;outline:none;cursor:pointer;" id="wumiiLikeBtn" hidefocus="true"></span>
    </div>
    <div id="wumiiRecommendBtnDiv" style="position:static;clear:none;float:left;display:inline;height:28px;margin:0;padding:0 5px;text-indent:0;">
        <span id="wumiiRecommendBtn" hidefocus="true" style="float:left;display:inline;width:60px;height:28px;margin:0 0 0 5px;padding:0;background:url('index_files/widget_buttons_deepBlue.png') no-repeat -267px 0;cursor:pointer;outline:none;" onmouseover="" onmouseout=""></span>
        <img src="index_files/loading.gif" id="wumiiLoading" style="clear:none;display:none;height:15px;margin:7px 0 0 8px;padding:0;border:0;background:none;cursor:default;" alt="正在加载推荐文章">
    </div>
</div>
<div class="wumii-related-items-div" wmode="2" style="margin: 0; border: none; padding: 0; clear: both; overflow: hidden; *zoom: 1; *position: relative;">
    
    
    
        <div class="wumii-internal" style="padding: 0; margin: 0; border: none; clear: both; display: block;">
        <div class="wumii-widget-title" style="margin: 0; border: none; padding: 20px 0 5px; _padding-top:10px; text-indent: 0; text-align: left; font-weight: bold; ">您可能也喜欢：</div>
                <div class="wumii-image-row" style="clear: both; overflow: hidden; border: none; padding: 0;margin: 0;_zoom: 1;" fromurl="http%3A%2F%2Fwww.kafeitu.me%2Fgit%2F2012%2F03%2F27%2Fgit-submodule.html"><a class="wumii-image-block" hidefocus="true" title="在Ubuntu(Debian)上安装最新版Git - 咖啡兔 - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/git/2012/04/10/install-lastest-git-on-ubuntu.html" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/87.jpg" image-url="http://wumii-cc.wumii.cn/resources/images/related_item_default/87.jpg" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">在Ubuntu(Debian)上安装最新版Git - 咖啡兔 - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="咖啡兔 - 在Ubuntu 12.04 LTS上安装Git1.7.10-rc4(中文化) - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/git/2012/04/05/install-git-1-7-10-use-tar.html" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/57.jpg" image-url="http://wumii-cc.wumii.cn/resources/images/related_item_default/57.jpg" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">咖啡兔 - 在Ubuntu 12.04 LTS上安装Git1.7.10-rc4(中文化) - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="新版Activiti Modeler发布以及教程 - 咖啡兔 - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/activiti/2012/09/30/new-version-of-activiti-modeler.html?t=1411540577584" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/Q8HYiJ4n.png" image-url="http://wumii-cc.wumii.cn/site_images/ti/Q8HYiJ4n.png?i=dcbz3Qko" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">新版Activiti Modeler发布以及教程 - 咖啡兔 - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="CAS单点登录(SSO)完整教程(2012-02-01更新) - 咖啡兔 - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/sso/2010/11/05/sso-cas-full-course.html?1366376166" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/YjPqzLpM.gif" image-url="http://wumii-cc.wumii.cn/site_images/ti/YjPqzLpM.gif?i=fF01lGVn" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">CAS单点登录(SSO)完整教程(2012-02-01更新) - 咖啡兔 - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="咖啡兔 - CAS单点登录(SSO)完整教程(2012-02-01更新) - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/sso/2010/11/05/sso-cas-full-course.html" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/YjPqzLpM-1.gif" image-url="http://wumii-cc.wumii.cn/site_images/ti/YjPqzLpM.gif?i=138ummWhs" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">咖啡兔 - CAS单点登录(SSO)完整教程(2012-02-01更新) - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="Activiti Explorer中文汉化 - 咖啡兔 - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/activiti/2012/09/30/activiti-explorer-i18n-for-chinese.html?t=1411528933496" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/OJTSY3nV.png" image-url="http://wumii-cc.wumii.cn/site_images/ti/OJTSY3nV.png?i=T1URTkgI" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">Activiti Explorer中文汉化 - 咖啡兔 - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="咖啡兔 - Hudson教程系列 - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/2010/08/15/ci-hudson-course.html" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/15.jpg" image-url="http://wumii-cc.wumii.cn/resources/images/related_item_default/15.jpg" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">咖啡兔 - Hudson教程系列 - HenryYan</div>
</a><a class="wumii-image-block" hidefocus="true" title="咖啡兔 - 推荐：正则表达式口诀及教程 - HenryYan" onmouseout="" onmouseover="" style="display: block; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0 0 -1px; padding: 5px; text-align: left; outline: none; background-image: none; border-left: 1px solid #DDDDDD !important;" href="http://www.kafeitu.me/2009/11/03/egular-expressions-formula-and-tutorial-recommended.html" redirecturl="">
    <span class="wumii-image-clip" style="overflow: hidden; position: relative; display: block; width: 100px; height: 100px; margin: 0 0 5px; padding: 0; border: 1px solid #DDDDDD;">
        <img src="index_files/39.jpg" image-url="http://wumii-cc.wumii.cn/resources/images/related_item_default/39.jpg" class="wumii-image" style="position: absolute; margin: 0px; padding: 0px; border: medium none; background: none repeat scroll 0% 0% transparent; left: 2px; top: 2px; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); visibility: visible;">
    </span>
    <div class="wumii-image-title" style="width: 102px; height: 60px; margin: 3px 0 0 0; padding: 0; text-indent: 0; text-align: left; border: none; font: 12px/15px arial; color: #333333; overflow: hidden; white-space: normal; clear: both;">咖啡兔 - 推荐：正则表达式口诀及教程 - HenryYan</div>
</a></div>
    </div><div class="wumii-footer" style="margin: 0px; border: medium none; padding: 5px 0px; clear: both; text-align: right; width: 903px;">
            <a href="http://www.wumii.com/widget/relatedItems" target="_blank" title="无觅关联推荐" style="font: 12px arial; color: rgb(187, 187, 187); border-bottom: medium none; word-wrap: normal; display: inline; cursor: pointer;">无觅关联推荐[?]</a>
                
        </div>
</div></div><script type="text/javascript" id="wumiiRelatedItems"></script>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
<script type="text/javascript" src="index_files/relatedItemsWidget.js"></script>
<a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
    <img src="index_files/pixel.png" alt="无觅相关文章插件，快速提升流量" style="border:0;padding:0;margin:0;">
</a>
<!-- Wumii Related END -->
        <div class="clearfix"></div>
      </div>
      <!-- Duoshuo Comment BEGIN -->
      <div id="ds-thread" class="ds-thread" data-title="Git Submodule使用完整教程" data-thread-key="/git/2012/03/27/git-submodule.html" data-author-key="kafeitu"><div id="ds-reset"><div class="ds-meta"><a href="javascript:void(0);" class="ds-like-thread-button ds-rounded"><span class="ds-icon ds-icon-heart"></span> <span class="ds-thread-like-text">喜欢</span><span class="ds-thread-cancel-like">取消喜欢</span></a><span class="ds-like-panel"><span class="ds-highlight">16</span> 人喜欢</span></div><div id="ds-hot-posts" class="ds-rounded"><div class="ds-header ds-gradient-bg">被顶起来的评论</div><ul><li class="ds-post" data-post-id="1197991585743885930"><div class="ds-post-self" data-post-id="1197991585743885930" data-thread-id="1197991585741820762" data-root-id="1197991585743885328" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585743885328"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://www.jiechic.com/" onclick="" title="jiechic"><img src="index_files/picture.jpg" alt="jiechic"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://www.jiechic.com/">jiechic</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2012-03-30T09:43:03+08:00" title="2012年3月30日 09时43分03秒">2012年3月30日</a><div class="ds-ctx-nth" title="2012年3月30日 09时43分03秒">1楼</div></div><div class="ds-ctx-content">好长，没看完，意思是不是，从其他仓库读取开发版公用库文件？　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>内容比较多，没办法；就是为了解决重复资源的应用并且保持一致的版本。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-03-30T10:34:21+08:00" title="2012年3月30日 10时34分21秒">2012年3月30日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶(2)</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li></ul></div><div class="ds-comments-info"><div class="ds-sort"><a class="ds-order-desc ds-current">最新</a><a class="ds-order-asc">最早</a><a class="ds-order-hot">最热</a></div><ul class="ds-comments-tabs"><li class="ds-tab"><a class="ds-comments-tab-duoshuo ds-current" href="javascript:void(0);"><span class="ds-highlight">43</span>条评论</a></li>  <li class="ds-tab"><a class="ds-comments-tab-qqt" href="javascript:void(0);"><span class="ds-highlight">6</span>条腾讯微博</a></li></ul></div><ul class="ds-comments"><li class="ds-post" data-post-id="6252092403545539329"><div class="ds-post-self" data-post-id="6252092403545539329" data-thread-id="1197991585741820762" data-root-id="6252092117108130562" data-source="duoshuo"><div class="ds-avatar" data-user-id="902297"><a rel="nofollow author" target="_blank" href="http://weibo.com/imcarl" onclick="" title="carlhan"><img src="index_files/1-1.jpg" alt="carlhan"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/imcarl" onclick="" rel="nofollow" target="_blank" data-user-id="902297">carlhan</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="6252092117108130562"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/imcarl" onclick="" title="carlhan"><img src="index_files/1-1.jpg" alt="carlhan"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/imcarl">carlhan</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2016-02-17T11:10:31+08:00" title="2016年2月17日 11时10分31秒">2月17日</a><div class="ds-ctx-nth" title="2016年2月17日 11时10分31秒">1楼</div></div><div class="ds-ctx-content">谢谢 很好的文章。<br>没有全部操作完。<br><br>但我的感受 怎么还不如这样：<br>把project1和lib1都clone到工作目录ws中。然后在project1里面创建软链接libs/lib1 -&gt; ../lib1。project1中添加libs/lib1到.gitignore中，在project1的README中说明或者提供一个脚本 更新lib1.　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>这样project1和lib1之间是分开的。每个repo commit都很方便。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2016-02-17T11:11:38+08:00" title="2016年2月17日 11时11分38秒">2月17日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="6252092117108130562"><div class="ds-post-self" data-post-id="6252092117108130562" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="902297"><a rel="nofollow author" target="_blank" href="http://weibo.com/imcarl" onclick="" title="carlhan"><img src="index_files/1-1.jpg" alt="carlhan"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/imcarl" onclick="" rel="nofollow" target="_blank" data-user-id="902297">carlhan</a></div><p>谢谢 很好的文章。<br>没有全部操作完。<br><br>但我的感受 怎么还不如这样：<br>把project1和lib1都clone到工作目录ws中。然后在project1里面创建软链接libs/lib1 -&gt; ../lib1。project1中添加libs/lib1到.gitignore中，在project1的README中说明或者提供一个脚本 更新lib1.</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2016-02-17T11:10:31+08:00" title="2016年2月17日 11时10分31秒">2月17日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="6247001702533169922"><div class="ds-post-self" data-post-id="6247001702533169922" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="6233598951640007426"><a rel="nofollow author" target="_blank" href="http://weibo.com/achildsdream" onclick="" title="JustForFun-GameWorld"><img src="index_files/1-2.jpg" alt="JustForFun-GameWorld"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/achildsdream" onclick="" rel="nofollow" target="_blank" data-user-id="6233598951640007426">JustForFun-GameWorld</a></div><p>写的这么认真，例子很好，佩服。如果最后能有个系统的总结就更好了。 <img src="index_files/good_org.gif" alt="[good]" title="[good]" class="ds-smiley"> </p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2016-02-03T17:57:07+08:00" title="2016年2月3日 17时57分07秒">2月3日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="6244405056972522241"><div class="ds-post-self" data-post-id="6244405056972522241" data-thread-id="1197991585741820762" data-root-id="6220268702965695234" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="victor"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">victor</span></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="6220268702965695234"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/1771133741" onclick="" title="如此玄妙"><img src="index_files/1-3.jpg" alt="如此玄妙"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/1771133741">如此玄妙</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2015-11-23T16:59:25+08:00" title="2015年11月23日 16时59分25秒">2015年11月23日</a><div class="ds-ctx-nth" title="2015年11月23日 16时59分25秒">1楼</div></div><div class="ds-ctx-content">非常好的文章，  更新所有module 可以用这个啊<br><br>git submodule update --recursive <br>其他脚本都是不需要的　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>楼主是说其他的project如果用到相同的lib，才需要脚本的，不是说同一个project的更新</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2016-01-27T18:00:48+08:00" title="2016年1月27日 18时00分48秒">1月27日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="6220268702965695234"><div class="ds-post-self" data-post-id="6220268702965695234" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="6220268478490739458"><a rel="nofollow author" target="_blank" href="http://weibo.com/1771133741" onclick="" title="如此玄妙"><img src="index_files/1-3.jpg" alt="如此玄妙"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/1771133741" onclick="" rel="nofollow" target="_blank" data-user-id="6220268478490739458">如此玄妙</a></div><p>非常好的文章，  更新所有module 可以用这个啊<br><br>git submodule update --recursive <br>其他脚本都是不需要的</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-11-23T16:59:25+08:00" title="2015年11月23日 16时59分25秒">2015年11月23日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="6213556078878130945"><div class="ds-post-self" data-post-id="6213556078878130945" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="绿茶"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">绿茶</span></div><p>命令行乱到无法阅读</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-11-05T14:51:01+08:00" title="2015年11月5日 14时51分01秒">2015年11月5日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682942"><div class="ds-post-self" data-post-id="1197991585752682942" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="973760"><a rel="nofollow author" target="_blank" href="http://weibo.com/wxlfight" onclick="" title="呵呵哒"><img src="index_files/1-4.jpg" alt="呵呵哒"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/wxlfight" onclick="" rel="nofollow" target="_blank" data-user-id="973760">呵呵哒</a></div><p>看到在project项目里面修改submodule项目就凌乱了，project项目负责人只管更新代码就好了，submodule应该由别人去管理吧</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-10-04T19:25:06+08:00" title="2015年10月4日 19时25分06秒">2015年10月4日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682928"><div class="ds-post-self" data-post-id="1197991585752682928" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="test"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">test</span></div><p>test comment</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-09-06T15:41:34+08:00" title="2015年9月6日 15时41分34秒">2015年9月6日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682905"><div class="ds-post-self" data-post-id="1197991585752682905" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="利源铝业"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">利源铝业</span></div><p>太啰嗦了，发文章出来也不过滤一下自己的SHELL环境，提交信息也弄上来浪费版面。。。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-08-07T15:07:18+08:00" title="2015年8月7日 15时07分18秒">2015年8月7日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682903"><div class="ds-post-self" data-post-id="1197991585752682903" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="5909376"><a rel="nofollow author" target="_blank" href="http://t.qq.com/zs1194567130" onclick="" title="烟尘"><img src="index_files/50.png" alt="烟尘"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://t.qq.com/zs1194567130" onclick="" rel="nofollow" target="_blank" data-user-id="5909376">烟尘</a></div><p>为什么我用 update 和 init 一点反应都没有，找了好久到不知道怎么更新啊</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-07-28T15:44:20+08:00" title="2015年7月28日 15时44分20秒">2015年7月28日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682885"><div class="ds-post-self" data-post-id="1197991585752682885" data-thread-id="1197991585741820762" data-root-id="1197991585752682384" data-source="duoshuo"><div class="ds-avatar" data-user-id="10784008"><a rel="nofollow author" target="_blank" href="http://weibo.com/3182094064" onclick="" title="clarkhan"><img src="index_files/141550.jpg" alt="clarkhan"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/3182094064" onclick="" rel="nofollow" target="_blank" data-user-id="10784008">clarkhan</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682384"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi">咖啡兔</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2014-01-03T11:05:11+08:00" title="2014年1月3日 11时05分11秒">2014年1月3日</a><div class="ds-ctx-nth" title="2014年1月3日 11时05分11秒">1楼</div></div><div class="ds-ctx-content">使用Git 1.7.11+版本的请不要再学习Submodule了，直接用Subtree　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>subtree 就是单纯的代码副本，带了历史记录吧。用了–squash连历史记录都没了。而且每次pull、push操作也都要跟上仓库、分支，不是更玛法吗？</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2015-06-09T16:47:02+08:00" title="2015年6月9日 16时47分02秒">2015年6月9日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682666"><div class="ds-post-self" data-post-id="1197991585752682666" data-thread-id="1197991585741820762" data-root-id="1197991585752682290" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="leptune"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">leptune</span></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682290"><div class="ds-avatar"><img src="index_files/926.jpg" alt="awaken"></div><div class="ds-ctx-body"><div class="ds-ctx-head">awaken<a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2013-10-05T00:11:55+08:00" title="2013年10月5日 00时11分55秒">2013年10月5日</a><div class="ds-ctx-nth" title="2013年10月5日 00时11分55秒">1楼</div></div><div class="ds-ctx-content">请问你是如何实现在bash prompt里显示git (branchname)的？　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>其实博主的shel终端不是bash，是zsh。。。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-08-28T15:54:47+08:00" title="2014年8月28日 15时54分47秒">2014年8月28日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682629"><div class="ds-post-self" data-post-id="1197991585752682629" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="lihw"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">lihw</span></div><p>我觉得2.8 中，使用:<br>git submodule init<br>git submodule update<br>就可以更新到最新的版本了，没必要 git checkout, git pull.</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-07-14T21:54:35+08:00" title="2014年7月14日 21时54分35秒">2014年7月14日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682587"><div class="ds-post-self" data-post-id="1197991585752682587" data-thread-id="1197991585741820762" data-root-id="1197991585752682586" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682586"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/1629287863" onclick="" title="文刀旋子"><img src="index_files/1-5.jpg" alt="文刀旋子"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/1629287863">文刀旋子</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2014-05-22T10:59:08+08:00" title="2014年5月22日 10时59分08秒">2014年5月22日</a><div class="ds-ctx-nth" title="2014年5月22日 10时59分08秒">1楼</div></div><div class="ds-ctx-content">请问下你们现在用 submodule 还是 subtree　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>submodule</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-05-22T14:50:30+08:00" title="2014年5月22日 14时50分30秒">2014年5月22日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682586"><div class="ds-post-self" data-post-id="1197991585752682586" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="6948634"><a rel="nofollow author" target="_blank" href="http://weibo.com/1629287863" onclick="" title="文刀旋子"><img src="index_files/1-5.jpg" alt="文刀旋子"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/1629287863" onclick="" rel="nofollow" target="_blank" data-user-id="6948634">文刀旋子</a></div><p>请问下你们现在用 submodule 还是 subtree</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-05-22T10:59:08+08:00" title="2014年5月22日 10时59分08秒">2014年5月22日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682465"><div class="ds-post-self" data-post-id="1197991585752682465" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="5386214"><a rel="nofollow author" target="_blank" href="http://weibo.com/chenee543216" onclick="" title="台上莫漫夸-眼前何足算"><img src="index_files/1-6.jpg" alt="台上莫漫夸-眼前何足算"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/chenee543216" onclick="" rel="nofollow" target="_blank" data-user-id="5386214">台上莫漫夸-眼前何足算</a></div><p>submodule就是在你的git里面记录一下你引用到的其他模块的信息。 <br><br>over。。。。<br><br><br>啥，这就over了。<br><br>对，木有错。就那么简单。<br><br>本质上和你手动copy一个reposit过来到你的工程目录，再拿个小本本记下来这个reposit是从哪里偷来的，木有啥区别。<br><br><br>只是，大家用多了发现这样不方便，于是就，给git一个submodule的命令。来便于操作。<br><br><br>------------------------------<br><br>以上虽然有很多的胡扯部分，但是本质就是那样。下面分几点说明<br><br>-----------------------------<br><br>1、<br><br>你的工程和你submodule，没有啥关系。你只是用到人家的代码而已，为了便于管理git集成submodule命令，这个命令完全可以用其他方式（比如脚本）来代替。<br><br>submodule就一个git项目，该怎么更新同步就怎么更新同步，别老想着从你的工程去管理别人的submodule，考虑问题的思路就不对。<br><br>（我需要从linux内核项目来敲命令跟新Apache项目吗？？？？？，需要吗？？？，我有可能2个都用啊）<br><br>虽然；1、submodule的仓库也是在你工程的.git/modules的文件夹下面<br><br>          2、提供submodule这个便捷的命令<br><br><br>2、<br><br>你项目建立的时候一定只是引用某个版本的submodule（对应到commit），而不是某个分支。所以默认都是detached from  XXXXX（commit id）;<br><br>因为，很可能人家提供submodule的人，过几天提交的文件会导致你当前工程完全不可用。。。。<br><br><br>3、上面默认的是最普遍的方式，但是也可能你的submodule就是自己维护的，可控！<br><br>那么这几个命令完全可以搞定（记不住木有关系，大不了多敲几行普通命令而已，俺就最头痛记命令）<br><br>（note：从overflow上面偷来的）<br><br># add submodule to track master branch<br>git submodule add -b master [URL to Git repo];<br><br># update your submodule<br>git submodule update --remote</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-02-20T18:56:52+08:00" title="2014年2月20日 18时56分52秒">2014年2月20日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682464"><div class="ds-post-self" data-post-id="1197991585752682464" data-thread-id="1197991585741820762" data-root-id="1197991585752682384" data-source="duoshuo"><div class="ds-avatar" data-user-id="4974229"><a rel="nofollow author" target="_blank" href="http://weibo.com/mudoot" onclick="" title="天天Naitiz"><img src="index_files/1-7.jpg" alt="天天Naitiz"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/mudoot" onclick="" rel="nofollow" target="_blank" data-user-id="4974229">天天Naitiz</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682384"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi">咖啡兔</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2014-01-03T11:05:11+08:00" title="2014年1月3日 11时05分11秒">2014年1月3日</a><div class="ds-ctx-nth" title="2014年1月3日 11时05分11秒">1楼</div></div><div class="ds-ctx-content">使用Git 1.7.11+版本的请不要再学习Submodule了，直接用Subtree　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>subtree怎么感觉是拷贝一个副本过来主工程呢，好像不太好用。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-02-20T14:36:28+08:00" title="2014年2月20日 14时36分28秒">2014年2月20日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682384"><div class="ds-post-self" data-post-id="1197991585752682384" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><p>使用Git 1.7.11+版本的请不要再学习Submodule了，直接用Subtree</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-01-03T11:05:11+08:00" title="2014年1月3日 11时05分11秒">2014年1月3日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682375"><div class="ds-post-self" data-post-id="1197991585752682375" data-thread-id="1197991585741820762" data-root-id="1197991585752682374" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682374"><div class="ds-avatar"><img src="index_files/926.jpg" alt="fanhe"></div><div class="ds-ctx-body"><div class="ds-ctx-head">fanhe<a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2013-12-23T17:42:29+08:00" title="2013年12月23日 17时42分29秒">2013年12月23日</a><div class="ds-ctx-nth" title="2013年12月23日 17时42分29秒">1楼</div></div><div class="ds-ctx-content">我来说几句.<br>博主shell的提示符太个性不利于阅读的人, 一般来说提示符最简单至少都需要一个'$'或者'#', 但是博主的是空格, 看得太累了,<br>无法快速地找出来真正执行的命令, 实在没有看下去的欲望啊　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>多谢你的建议，后面的文章我会注意的</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-12-23T19:50:19+08:00" title="2013年12月23日 19时50分19秒">2013年12月23日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682374"><div class="ds-post-self" data-post-id="1197991585752682374" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="fanhe"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">fanhe</span></div><p>我来说几句.<br>博主shell的提示符太个性不利于阅读的人, 一般来说提示符最简单至少都需要一个'$'或者'#', 但是博主的是空格, 看得太累了,<br>无法快速地找出来真正执行的命令, 实在没有看下去的欲望啊</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-12-23T17:42:29+08:00" title="2013年12月23日 17时42分29秒">2013年12月23日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682320"><div class="ds-post-self" data-post-id="1197991585752682320" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="4068160"><a rel="nofollow author" target="_blank" href="http://weibo.com/3167337765" onclick="" title="SadieYuCN"><img src="index_files/1-8.jpg" alt="SadieYuCN"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/3167337765" onclick="" rel="nofollow" target="_blank" data-user-id="4068160">SadieYuCN</a></div><p>Thank you very much !</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-10-30T14:54:55+08:00" title="2013年10月30日 14时54分55秒">2013年10月30日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682312"><div class="ds-post-self" data-post-id="1197991585752682312" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="3995462"><a rel="nofollow author" target="_blank" href="http://www.litefeel.com/" onclick="" title="lite3_"><img src="index_files/313d0583bfc8ccc7bebd7594f8497177.jpg" alt="lite3_"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://www.litefeel.com/" onclick="" rel="nofollow" target="_blank" data-user-id="3995462">lite3_</a></div><p>终于看完了，这篇很有用啊。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-10-24T01:20:09+08:00" title="2013年10月24日 01时20分09秒">2013年10月24日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682301"><div class="ds-post-self" data-post-id="1197991585752682301" data-thread-id="1197991585741820762" data-root-id="1197991585752682290" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="will11"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">will11</span></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682290"><div class="ds-avatar"><img src="index_files/926.jpg" alt="awaken"></div><div class="ds-ctx-body"><div class="ds-ctx-head">awaken<a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2013-10-05T00:11:55+08:00" title="2013年10月5日 00时11分55秒">2013年10月5日</a><div class="ds-ctx-nth" title="2013年10月5日 00时11分55秒">1楼</div></div><div class="ds-ctx-content">请问你是如何实现在bash prompt里显示git (branchname)的？　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>[Showing your Git branch in your shell prompt](http://aaroncrane.co.uk/2009/03/git_branch_prompt/)</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-10-18T15:36:12+08:00" title="2013年10月18日 15时36分12秒">2013年10月18日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682290"><div class="ds-post-self" data-post-id="1197991585752682290" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="awaken"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">awaken</span></div><p>请问你是如何实现在bash prompt里显示git (branchname)的？</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-10-05T00:11:55+08:00" title="2013年10月5日 00时11分55秒">2013年10月5日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682190"><div class="ds-post-self" data-post-id="1197991585752682190" data-thread-id="1197991585741820762" data-root-id="1197991585752682189" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752682189"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/gourdboy" onclick="" title="葫芦和舒克"><img src="index_files/1-9.jpg" alt="葫芦和舒克"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/gourdboy">葫芦和舒克</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2013-07-31T10:50:59+08:00" title="2013年7月31日 10时50分59秒">2013年7月31日</a><div class="ds-ctx-nth" title="2013年7月31日 10时50分59秒">1楼</div></div><div class="ds-ctx-content">最近在用submodule做前端的架构，前端目前的工作仍处于需求不断的变化阶段，尤其是UI和交互面临这分久必合，合久必分的一种状态，所以在用GIT管理公用UI库时主要解决公用模块的统一维护和个性化定制的需求，读完你这篇文字后submodule更像一个软连接的实现，实现了统一维护，各自发布的需求。但是如果子模块有BUG，且他的OWNER不在时，需要FORK代码来提交新的修改，所以个性化时的处理比较麻烦。看了一下，还有subtree这个概念，能以子树合并的方式解决此类需求。谢谢你的笔记　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>你可以使用不同的branch管理个性化</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-07-31T21:00:46+08:00" title="2013年7月31日 21时00分46秒">2013年7月31日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682189"><div class="ds-post-self" data-post-id="1197991585752682189" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="2893123"><a rel="nofollow author" target="_blank" href="http://weibo.com/gourdboy" onclick="" title="葫芦和舒克"><img src="index_files/1-9.jpg" alt="葫芦和舒克"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/gourdboy" onclick="" rel="nofollow" target="_blank" data-user-id="2893123">葫芦和舒克</a></div><p>最近在用submodule做前端的架构，前端目前的工作仍处于需求不断的变化阶段，尤其是UI和交互面临这分久必合，合久必分的一种状态，所以在用GIT管理公用UI库时主要解决公用模块的统一维护和个性化定制的需求，读完你这篇文字后submodule更像一个软连接的实现，实现了统一维护，各自发布的需求。但是如果子模块有BUG，且他的OWNER不在时，需要FORK代码来提交新的修改，所以个性化时的处理比较麻烦。看了一下，还有subtree这个概念，能以子树合并的方式解决此类需求。谢谢你的笔记</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-07-31T10:50:59+08:00" title="2013年7月31日 10时50分59秒">2013年7月31日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682151"><div class="ds-post-self" data-post-id="1197991585752682151" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="2565646"><a rel="nofollow author" target="_blank" href="http://weibo.com/uc22817661" onclick="" title="mac_xiaoxu"><img src="index_files/1-10.jpg" alt="mac_xiaoxu"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/uc22817661" onclick="" rel="nofollow" target="_blank" data-user-id="2565646">mac_xiaoxu</a></div><p>太长大多，看起来有点乱</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-07-05T14:28:09+08:00" title="2013年7月5日 14时28分09秒">2013年7月5日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682144"><div class="ds-post-self" data-post-id="1197991585752682144" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="yl"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">yl</span></div><p>牛13！学习了</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-07-02T15:50:33+08:00" title="2013年7月2日 15时50分33秒">2013年7月2日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752682109"><div class="ds-post-self" data-post-id="1197991585752682109" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="will"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">will</span></div><p>读完了，很好，实践出真知，很赞成博主的写作风格。（我今天cp了一个git init后的目录的文件到git管理的已有项目下，把.git也一起cp进去了于是就：is in submodule）.git/conf中没有记录，.gitsumodule也不存在。郁闷了，上网搜到这里。学习了。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-06-19T14:32:46+08:00" title="2013年6月19日 14时32分46秒">2013年6月19日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681887"><div class="ds-post-self" data-post-id="1197991585752681887" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="1603197"><a rel="nofollow author" target="_blank" href="http://t.qq.com/szbzhao" onclick="" title="赵庆"><img src="index_files/926.jpg" alt="赵庆"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://t.qq.com/szbzhao" onclick="" rel="nofollow" target="_blank" data-user-id="1603197">赵庆</a></div><p>用 git clone --recursive /path/to/repos/foo.git 后<br>会在当前文件夹下生成foo目录，单如果把它该成成其他名字后，模块，不工作了，我用git submodue init  和 git submodule update 都不能同步这个改变。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-03-31T12:58:05+08:00" title="2013年3月31日 12时58分05秒">2013年3月31日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681859"><div class="ds-post-self" data-post-id="1197991585752681859" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://www.badnotes.com/" title="jovan"><img src="index_files/926.jpg" alt="jovan"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://www.badnotes.com/" rel="nofollow" target="_blank">jovan</a></div><p> <img src="index_files/zz2_org.gif" alt="[织]" title="[织]" class="ds-smiley"> 信息量好大，慢慢学习，赞一个.</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-03-20T23:14:22+08:00" title="2013年3月20日 23时14分22秒">2013年3月20日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681752"><div class="ds-post-self" data-post-id="1197991585752681752" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="Bill Z"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">Bill Z</span></div><p>帮你更新一下， 我的git版本是：git version 1.7.10.4<br>1. 现在不需要你说的 git submodue add git-url  local_dir 后还要git submodule init 后才能git submodule update 的了<br>2. submoude  .git的位置现在是放在顶层的.git的目录的modules目录下面，这会影响到你说的删除submodule方法（在删除模块的时候还得到这个modues目录去删对应的模块了）<br>3. 就是奇怪，还是没看到一个一次干净删除模块的命令。<br><br>我刚刚开始revew这个功能，能多大程度帮助项目。<br>qq:1517537094 </p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-01-11T08:34:17+08:00" title="2013年1月11日 08时34分17秒">2013年1月11日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681751"><div class="ds-post-self" data-post-id="1197991585752681751" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="Bill Z"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">Bill Z</span></div><p>学习，练习中 。。。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-01-11T06:35:47+08:00" title="2013年1月11日 06时35分47秒">2013年1月11日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681738"><div class="ds-post-self" data-post-id="1197991585752681738" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="237901"><a rel="nofollow author" target="_blank" href="http://www.the5fire.com/" onclick="" title="胡阳"><img src="index_files/1-11.jpg" alt="胡阳"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://www.the5fire.com/" onclick="" rel="nofollow" target="_blank" data-user-id="237901">胡阳</a></div><p>收藏了，慢慢看</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-01-07T13:37:27+08:00" title="2013年1月7日 13时37分27秒">2013年1月7日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681733"><div class="ds-post-self" data-post-id="1197991585752681733" data-thread-id="1197991585741820762" data-root-id="1197991585752681723" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="txworking"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">txworking</span></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752681723"><div class="ds-avatar"><img src="index_files/926.jpg" alt="紫煌"></div><div class="ds-ctx-body"><div class="ds-ctx-head">紫煌<a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2013-01-01T20:34:07+08:00" title="2013年1月1日 20时34分07秒">2013年1月1日</a><div class="ds-ctx-nth" title="2013年1月1日 20时34分07秒">1楼</div></div><div class="ds-ctx-content">现在我更新submodule统一用：`git submodule foreach git pull`。<br>`git submodule update`似乎除了和git clone配合的那种情况外就根本没用了。　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>但是这样submodule就直接到最新版本了，和主项目记录的commit id不一致。<br>我用git pull &amp; git submodule update倒是都同步了，但是submodule会变成no branch状态，这个不知道为啥。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-01-06T13:07:21+08:00" title="2013年1月6日 13时07分21秒">2013年1月6日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681724"><div class="ds-post-self" data-post-id="1197991585752681724" data-thread-id="1197991585741820762" data-root-id="1197991585752681723" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585752681723"><div class="ds-avatar"><img src="index_files/926.jpg" alt="紫煌"></div><div class="ds-ctx-body"><div class="ds-ctx-head">紫煌<a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2013-01-01T20:34:07+08:00" title="2013年1月1日 20时34分07秒">2013年1月1日</a><div class="ds-ctx-nth" title="2013年1月1日 20时34分07秒">1楼</div></div><div class="ds-ctx-content">现在我更新submodule统一用：`git submodule foreach git pull`。<br>`git submodule update`似乎除了和git clone配合的那种情况外就根本没用了。　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>学习了，之前我还自己写脚本更新每个submodule，我会把这个命令更新到博文</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-01-02T10:28:49+08:00" title="2013年1月2日 10时28分49秒">2013年1月2日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681723"><div class="ds-post-self" data-post-id="1197991585752681723" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="紫煌"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">紫煌</span></div><p>现在我更新submodule统一用：`git submodule foreach git pull`。<br>`git submodule update`似乎除了和git clone配合的那种情况外就根本没用了。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-01-01T20:34:07+08:00" title="2013年1月1日 20时34分07秒">2013年1月1日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681673"><div class="ds-post-self" data-post-id="1197991585752681673" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="index_files/926.jpg" alt="leslie"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">leslie</span></div><p>写得非常好，很顺，谢谢.</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-12-05T15:50:39+08:00" title="2012年12月5日 15时50分39秒">2012年12月5日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585752681655"><div class="ds-post-self" data-post-id="1197991585752681655" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://jianxi.info/" title="ycsunjane@gmail.com"><img src="index_files/926.jpg" alt="ycsunjane@gmail.com"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://jianxi.info/" rel="nofollow" target="_blank">ycsunjane@gmail.com</a></div><p>讲解很明晰，谢谢！我认为只要了解commit id就很好理解了submodule了！</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-11-23T10:10:49+08:00" title="2012年11月23日 10时10分49秒">2012年11月23日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585750911775"><div class="ds-post-self" data-post-id="1197991585750911775" data-thread-id="1197991585741820762" data-root-id="1197991585750911698" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585750911698"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://weibo.com/neo4j" onclick="" title="Neo4j"><img src="index_files/1-12.jpg" alt="Neo4j"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://weibo.com/neo4j">Neo4j</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2012-09-10T11:58:45+08:00" title="2012年9月10日 11时58分45秒">2012年9月10日</a><div class="ds-ctx-nth" title="2012年9月10日 11时58分45秒">1楼</div></div><div class="ds-ctx-content">写得真的很好，谢谢你。 <img src="index_files/good_org.gif" alt="[good]" title="[good]" class="ds-smiley"> 　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>感谢支持！</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-09-10T12:01:27+08:00" title="2012年9月10日 12时01分27秒">2012年9月10日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585750911698"><div class="ds-post-self" data-post-id="1197991585750911698" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="595257"><a rel="nofollow author" target="_blank" href="http://weibo.com/neo4j" onclick="" title="Neo4j"><img src="index_files/1-12.jpg" alt="Neo4j"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/neo4j" onclick="" rel="nofollow" target="_blank" data-user-id="595257">Neo4j</a></div><p>写得真的很好，谢谢你。 <img src="index_files/good_org.gif" alt="[good]" title="[good]" class="ds-smiley"> </p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-09-10T11:58:45+08:00" title="2012年9月10日 11时58分45秒">2012年9月10日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585743885930"><div class="ds-post-self" data-post-id="1197991585743885930" data-thread-id="1197991585741820762" data-root-id="1197991585743885328" data-source="duoshuo"><div class="ds-avatar" data-user-id="242801"><a rel="nofollow author" target="_blank" href="http://weibo.com/kafeituzi" onclick="" title="咖啡兔"><img src="index_files/1.jpg" alt="咖啡兔"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/kafeituzi" onclick="" rel="nofollow" target="_blank" data-user-id="242801">咖啡兔</a></div><ol id="ds-ctx"><li class="ds-ctx-entry" data-post-id="1197991585743885328"><div class="ds-avatar"><a rel="nofollow author" target="_blank" href="http://www.jiechic.com/" onclick="" title="jiechic"><img src="index_files/picture.jpg" alt="jiechic"></a></div><div class="ds-ctx-body"><div class="ds-ctx-head"><a rel="nofollow author" target="_blank" href="http://www.jiechic.com/">jiechic</a><a href="http://www.kafeitu.me/git/2012/03/27/undefined" target="_blank" rel="nofollow" class="ds-time" datetime="2012-03-30T09:43:03+08:00" title="2012年3月30日 09时43分03秒">2012年3月30日</a><div class="ds-ctx-nth" title="2012年3月30日 09时43分03秒">1楼</div></div><div class="ds-ctx-content">好长，没看完，意思是不是，从其他仓库读取开发版公用库文件？　　　　　　　<div class="ds-comment-actions"><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a></div></div></div></li></ol><p>内容比较多，没办法；就是为了解决重复资源的应用并且保持一致的版本。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-03-30T10:34:21+08:00" title="2012年3月30日 10时34分21秒">2012年3月30日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶(2)</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1197991585743885328"><div class="ds-post-self" data-post-id="1197991585743885328" data-thread-id="1197991585741820762" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="571570"><a rel="nofollow author" target="_blank" href="http://www.jiechic.com/" onclick="" title="jiechic"><img src="index_files/picture.jpg" alt="jiechic"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://www.jiechic.com/" onclick="" rel="nofollow" target="_blank" data-user-id="571570">jiechic</a></div><p>好长，没看完，意思是不是，从其他仓库读取开发版公用库文件？</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-03-30T09:43:03+08:00" title="2012年3月30日 09时43分03秒">2012年3月30日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li></ul><div style="display: none;" class="ds-paginator"><div class="ds-border"></div><a data-page="1" href="javascript:void(0);" class="ds-current">1</a></div><a name="respond"></a><div class="ds-toolbar"><div class="ds-account-control"><span class="ds-icon ds-icon-settings"></span> <span>帐号管理</span><ul><li><a class="ds-bind-more" href="javascript:void(0);" style="border-top: none">绑定更多</a></li><li><a target="_blank" href="http://duoshuo.com/settings/">设置</a></li><li><a rel="nofollow" href="http://kafeitu.duoshuo.com/logout/" style="border-bottom: none">登出</a></li></ul></div><div class="ds-visitor"><a class="ds-visitor-name" href="http://t.qq.com/quiet_heart000" target="_blank">QuietHeart</a><a style="display: none;" class="ds-unread-comments-count" href="javascript:void(0);" title="你没有新回复">0</a></div></div><div class="ds-replybox"><a class="ds-avatar" href="http://duoshuo.com/settings/avatar/" target="_blank" title="设置头像"><img src="index_files/100.jpg" alt="QuietHeart"></a><form method="post"><input name="thread_id" value="1197991585741820762" type="hidden">
<input name="parent_id" value="" type="hidden">
<input name="nonce" value="56a5f610a3e31" type="hidden"><div class="ds-textarea-wrapper ds-rounded-top"><textarea name="message" title="Ctrl+Enter快捷提交" placeholder="说点什么吧…"></textarea><pre class="ds-hidden-text"></pre></div><div class="ds-post-toolbar"><div class="ds-post-options ds-gradient-bg"><span class="ds-sync"><input id="ds-sync-checkbox" name="repost" checked="checked" value="qqt,qzone" type="checkbox"> <label for="ds-sync-checkbox">分享到:</label><a href="javascript:void(0);" class="ds-service-icon ds-qqt" data-service="qqt" title="腾讯微博"></a><a href="javascript:void(0);" class="ds-service-icon ds-qzone" data-service="qzone" title="QQ空间"></a></span></div><button class="ds-post-button" type="submit">发布</button><div class="ds-toolbar-buttons"><a class="ds-toolbar-button ds-add-emote" title="插入表情"></a><a class="ds-toolbar-button ds-add-image" title="插入图片"></a></div></div></form></div><p class="ds-powered-by"><a href="http://duoshuo.com/" target="_blank" rel="nofollow">多说强力驱动</a></p></div></div>
      <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
      <!-- Duoshuo Comment END -->
    </div>
    <div id="footer">
      Copyright © 2012~2013 咖啡兔|Henry Yan. Hosted by <a href="http://github.com/henryyan/henryyan.github.com/" target="_blank">GitHub</a> and powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a>. Templates from <a href="http://github.com/mbleigh/mbleigh.github.com/" target="_blank">Michael Bleigh</a>.
    </div>

    <!-- 语法高亮 BEGIN -->
    <script src="index_files/shCore.js" type="text/javascript"></script>
    <script src="index_files/shAutoloader.js" type="text/javascript"></script>
    <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
    <!-- 语法高亮 END -->

    <!-- UJian Button BEGIN -->
    <script type="text/javascript" src="index_files/ujian.js"></script>
    <!-- UJian Button END -->
	 <script src="index_files/stat.php.js" language="JavaScript"></script><script src="index_files/core.php.js" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=2566493" target="_blank" title="站长统计"><img src="index_files/pic.gif" border="0" hspace="0" vspace="0"></a>
  

</div><div style="top: 24px; right: 24px; display: none;" id="ds-notify"><div id="ds-reset"><a class="ds-logo" href="http://duoshuo.com/" target="_blank" title="多说"></a><ul class="ds-notify-unread"><li style="display:none;"><a data-type="unread-comments" href="javascript:void(0);">你有undefined条新回复</a></li><li style="display:none;"><a data-type="unread-notifications" href="javascript:void(0);">你有undefined条系统消息</a></li></ul></div></div></body></html>