---
layout: posts
title: Vim实践与学习-01简介
categories: [categories, study, Vim]
tags: [gtd_next, study]
comments: true
---

### 什么是Vim  
没有明确的定义，这里给出一些经验性的概括

> * Vim是上世纪这个世界上诞生的两款最著名的编辑神器之一，另外一个是Emacs
> * Vim和Emacs若只提两者之一而不提另外一个，这个世界便显得不平衡
> * 这两款编辑器均诞生在Linux/Unix平台上，后来也被移植到其他操作系统中
> * 二者是软件世界中的神话，历经半个世纪的洗礼、淘汰筛选、甚至它们本身相互之间的圣战至今，仍然长盛不衰，其强大之处让其它同类工具望尘莫及
> * 虽说是传闻但是在各个不同版本和来源上的传闻都意指：真正强悍的程序员开发使用的不是IDE，而是Vim和Emacs
> * 本人喜欢寻找各类功能强大、灵活、方便的开发以及文档撰写编辑等工具，随着经验、技术和实践、成长的积累，最终也渐渐将目标集中在这两款编辑器中
> * 有人甚至总结出世界上有三种程序员：使用Vim的程序员、使用Emacs的程序员、和其它程序员

本文主要介绍Vim编辑器，Emacs的介绍放在其它之处

目前我们实际使用的都是Vim，它其实是vi的改进版本之一，是最流行的改进版本，所以现在所说的Vi基本上就是Vim了

### Vim能做什么  
Vim能够处理的事情很多，前面说了那么多空话，为避免有广告之嫌，这里列出其中一些常用的功能应用：  

> * 编辑和浏览文本文件  
> * 浏览和管理文件目录  
> * 阅读程序源代码  
> * 提供编程、调试环境  
> * 利用自带的脚本语言扩展自身  
> * 自动化智能、批量地处理文本
> 
> 等等……

### 与其他编辑器的比较
这里的比较主要是针对与它的“对手”Emacs而言，前面众多说法中，有一种可以这样解释：在Linux/Unix界，有三种编辑器：一种是Emacs，一种是Vim，还有一种是除此之外的编辑器，由此可见Vim在编辑器领域的地位。

#### 操作理念不同
Vim与Emacs，两者各有千秋，下面只列出其中少许

> * Vim侧重简洁、快速、高效；Emacs侧重大而全、具有超强的扩展与配置能力
> * Vim更专注于编辑功能本身，将编辑功能发挥到极致，将每一次的操作任务一气呵成
> * Emacs注重全面，集成了编辑中你能想到的方方面面，将因频繁切换被打断的思路减至最少
> 
> 等等……

其实，Vim更算是一款编辑器，而Emacs则像是隐藏在编辑器下的操作系统。

#### 工作方式不同
有人做过这样的比喻，Vim是编辑器之神，Emacs是神之编辑器。

* 使用Vim时
    + 其编辑之高效，将所思想如行云流水般实现
    + 随着对Vim的熟练，甚至不注意时操作会超越思维，还没有想完下一步的操作，手指就已经被Vim控制着完成了任务
    + 使用Vim容易让人有种走火入魔，成为“编辑器神之奴”的感觉

* 使用Emacs时
    + 总会不满当前操作效率，对当前的编辑操作提出更高要求；不满过后，总能在后续的完善配置扩展中找到能够达到、甚至超过预期需求的特性
    + 达到需求后，又再次陷入不满、配置、扩展、满足的循环当中
    + 在这种不断进步并且提高效率过程中，让人不断地因找到更好方式而满足，因不断发现缺陷而失落，使得Emacs逐渐成为让我们踏足“神域”的桥梁

两者除各自擅长之处外，又各自在对方擅长的领域表现优异，令其它类编辑器“无可乘之机”，也另对方不敢有丝毫“松懈”。

#### 建议
历史上两者的阵营之间爆发过多次“圣战”，涉及的方面太多，这里不一一列举，在实用的原则上，这里给出一点建议：
* 对两者的选择，应当建立在对它们的了解之上
* 使用Vim之时要给自己的思维一点空闲时间，防止进入“走火入魔”的境地
* 而对Emacs的使用，其配置和扩展能够达到一定实用价值即可，避免为了不断提升Emacs而使用Emacs（虽然不断的提升是值得的）

#### Vim的特征
本文并无意加入Vim和Emacs的圣战中来；因讲述的是Vim的使用，所以针对其特点进行叙述；相应地Emacs也有它的特点，在讲述Emacs之时也会相应提到。

一般使用过两者的人，可能会有如下的感觉：

* 相比Emacs而言，Vim更为“通用”，这里的通用是指，并不是所有机器上都配有Emacs、但是大多数机器上都配有vi编辑器
* 使用Vim不会像Emacs那样过度依赖本地配置与扩展，有些配置可以在使用Vim时按需即时开启（比如语法高亮与代码折叠）
* Vim启动迅速（启动Vim时，一般不需加载过多增强插件），按键简短（Vim的按键命令一般不会过长，组合键的情况很少）
* Vim只将编辑相关操作发挥极致，不做多余之事（与其它工具配合度高，编辑外的事情在Linux中自然有专门软件替它实现，如搜索文本通过grep完成）

还有许多，这里也不过多叙述，为避免卷入圣战，还是需要做一点补充：当然，若不频繁切换自己的环境，或者能找到一种方式稳定在同一环境下工作的话，Emacs迟早也同样能做到甚至超越这些方面（记得有一款Emacs插件叫"evil"，作用是将vim的功能包含到Emacs中来，可见这款插件的意图是多么的邪恶^_^）。

总之，使用工具的方式，决定工具的价值。

#### 与Emacs的共通之处
Vim与Emacs其实也有许多共通之处，这里只给出我们最容易遇见和理解的两条：

+ 相比其他编辑器，Vim的入门门槛高一些，这里给出一个编辑器的学习曲线图：

![主流编辑器学习曲线图](/data/image/2010-04-02-editor_study_line.jpg)

+ 虽然两者入门难度较大，但是两者又都有一个非常好的学习捷径：避免只看理论，尽早让实践成为习惯，在实践中学习。

### 开始学习

#### 本文约定  
特殊按键表示：

    Space: <SPC>  
    Ctrl: <CTRL>或<C>  
    Alt: <ALT>或<M>  
    Esc: <ESC>（注意，Emacs也将Esc键归为<M>）  
    Shift: <SHIFT>或<S>  
    Tab: <Tab>  
    Enter: <Enter>（有些时候为<RET>或<CR>）  
    BackSpace:<<BS>（注意，Emacs上表示为<DEL>，Emacs上<DEL>不是Delete按键）  
    Delete:<Del>  

组合键的表示：

    <Esc>: Escape key
    <C-G>: CTRL-G
    <Up>: cursor up key
    <C-LeftMouse>: Control- left mouse click
    <S-F11>: Shifted function key 11
    <M-a>: Meta- a  ('a' with bit 8 set)
    <M-A>: Meta- A  ('A' with bit 8 set)
    <t_kd>: "kd" termcap entry (cursor down key)

更多内容可以打开Vim并输入`:help keycode`，参考其帮助手册给出的Key表示。

在没有歧义的情况下，可以使用任何方式表示。

#### 模式的概念　　
Vim具有多种模式，后面会详述，初学时，我们最好能理解其中两种最常见的模式：  
* 输入模式  
    又可称为或插入模式、编辑模式。  
    输入模式下输入字符，字符会插入至文本中，并显示在屏幕上。

* 指令模式  
    又可称为命令模式，是Vim启动后默认的模式。  
    指令模式下输入字符，并不会将相应的字符插入文本，而是将字符解释为一个输入命令并执行，理解指令模式最简单方式就是想象平时剪切、复制以及粘贴数据时所发生的情况。  
    + 行命令模式  
        是在指令模式下一种特殊的情况，可以输入复杂的命令用户 。  
        进入行命令模式后，vim底部会有一行空间，供用户输入。用户输入的字符会在这里显示，键入回车后执行相应的命令。
总结起来，在本文中，“插入模式”＝“输入模式”＝“编辑模式”、“指令模式”＝“命令模式”、“行命令模式”是特殊的指令模式。

#### 基本操作
这里提供了使用vi得最基本的操作，能够实现基本的编辑目的。  
如果你肯花几分钟把这里的内容都实践一下，那么至少能够独立地在Vim中朝你想要得方向“前进”。  
如果你不想学习，也可以把它当作一个“便签”，现查现用。

* 打开一个文件：  
    输入`vi filename`。  
    这里，`filename`就是你要打开的文件的名字，默认打开文件后vi处于指令模式。

* 进入编辑模式编辑打开的文件：  
    输入`i`.  
    或输入`a`.  
    进入编辑模式后，你可以直接敲入想要输入的字符到文件，两者的区别是i在当前字符前面开始插入，a在当前字符后面开始插入。

* 退出编辑模式：  
    输入`<ESC>`.  
    这样，将返回指令模式，准备接收你要传达给vi的指令并执行，如果之前已经在指令模式下，那么系统将响铃提醒一下。

* 以下命令都是在命令模式下进行：  
    + 撤销修改  
        输入`u`.  
        这里，相比以前的vi来说，vim支持多步撤销。

    + 恢复修改  
        输入`<C-r>`.  
        这里，和撤销命令相反，是撤销的撤销，也可多步。

    + 复制行到剪切板：  
        输入`yy`.

    + 复制选定内容到剪切板：  
        1. 输入`v`。  
        2. 按方向键将高亮选择的内容。  
        3. 输入`y`。  

    这里，开始输入v使vi临时进入了一个"选择模式"，输入方向键可以选择，输入y将选择的内容复制剪切板。

    + 删除行：  
        输入`dd`.  
        注意，vi的删除等价于剪切，删除的内容会保存到剪切板中。

    + 删除选定内容：  
        1. 输入`v`。  
        2. 按方向键将高亮选择的内容。  
        3. 输入`d`。  
    这里，开始输入`v`使vi临时进入了一个“选择模式”，输入方向键可以选择，输入`d`将选择的内容删除。

    + 粘贴：  
        输入`p`.  
        这样会将剪切板的内容粘贴到光标位置或者光标下一行。

    + 查找字符并定位到第一个匹配处：  
        输入`/character`.  
        这里`character`是待查找的字符，只要先输入`/`，再输入待查字符，最后回车即可定位到第一个匹配的字符处。

    + 定位到匹配查找的下一个字符处：  
        输入`n`.

    + 定位到匹配查找的上一个字符处：  
        输入`N`.

    + 保存文件：  
        输入`:w`.  
        注意`w`前面的`:`，输入`:`之后，vim会将`:`之后的输入解释为待执行的指令。

    + 退出：  
        输入`:q`.  
        这里，如果文件没有保存，将提示无法退出，除非你强制退出，不保存文件，或者保存退出。

    + 强制退出：  
        输入`:q!`.

    + 保存退出：  
        输入`:wq`.  
        或输入`:x`.  
        或输入`ZZ`.  

    + 察看帮助  
        输入`:help`.
